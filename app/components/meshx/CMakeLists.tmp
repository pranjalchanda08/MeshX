# This is the MeshX CMakeLists.txt template. Any changes made to this file shall directy reflect to the generated CMakeLists.txt

# Filter only directories

set(INTERFACE_DIRS
    "interface"
    "interface/logging"
    "interface/rtos"
)

set(LOGGING_SRC
    "interface/logging/meshx_log.c")

set(PLAT_DIRS
    "port"
    "port/esp32_idf"
    "port/esp32_idf/ble_mesh/common"
    "port/esp32_idf/platform"
)

file(GLOB FREERTOS_SRC
    "port/rtos/FreeRTOS/*.c"
)

file(GLOB PLAT_SRC
    "port/esp32_idf/platform/*.c"
)

set(INC_DIRS
    ${DEP_INC}
    ${INTERFACE_DIRS}
    ${PLAT_DIRS}
)

set(SRCSX
    ${DEP_SRC}
    ${LOGGING_SRC}
    ${FREERTOS_SRC}
    ${PLAT_SRC}
)

message("       >> Include Dir: ${INC_DIRS}")
message("       >> libmeshx.a : ${SRCSX}")

idf_component_register( SRCS ${SRCSX}
                        INCLUDE_DIRS "${INC_DIRS}"
                        LDFRAGMENTS "meshx.lf"
                        REQUIRES bt
                                nvs_flash
                                unit_test
                    )
