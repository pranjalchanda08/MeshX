<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MeshX: MeshX</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">MeshX<span id="projectnumber">&#160;0.4</span>
   </div>
   <div id="projectbrief">This repository provides an implementation for Bluetooth Low Energy (BLE) Mesh network nodes. The project allows you to create BLE mesh nodes that can communicate with each other, enabling the development of smart home solutions or other IoT-based applications.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="doc-content">
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">MeshX </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_README"></a></p>
<div class="fragment"><div class="line">*********************************************************************************************************************</div>
<div class="line">* MMMMMMMM               MMMMMMMM                                     hhhhhhh                 XXXXXXX       XXXXXXX *</div>
<div class="line">* M:::::::M             M:::::::M                                     h:::::h                 X:::::X       X:::::X *</div>
<div class="line">* M::::::::M           M::::::::M                                     h:::::h                 X:::::X       X:::::X *</div>
<div class="line">* M:::::::::M         M:::::::::M                                     h:::::h                 X::::::X      X:::::X *</div>
<div class="line">* M::::::::::M       M::::::::::M    eeeeeeeeeeee        ssssssssss   h:::: hhhhhh            XX:::::X     X:::::XX *</div>
<div class="line">* M:::::::::::M     M:::::::::::M  ee::::::::::::ee    ss::::::::::s  h::::::::::hhh            X:::::X   X:::::X   *</div>
<div class="line">* M:::::::M::::M   M::::M:::::::M e::::::eeeee:::::eess:::::::::::::s h::::::::::::::hh           X:::::X:::::X     *</div>
<div class="line">* M::::::M M::::M M::::M M::::::Me::::::e     e:::::es::::::ssss:::::sh:::::::hhh::::::h           X:::::::::X      *</div>
<div class="line">* M::::::M  M::::M::::M  M::::::Me:::::::eeeee::::::e s:::::s  ssssss h::::::h   h::::::h          X:::::::::X      *</div>
<div class="line">* M::::::M   M:::::::M   M::::::Me:::::::::::::::::e    s::::::s      h:::::h     h:::::h         X:::::X:::::X     *</div>
<div class="line">* M::::::M    M:::::M    M::::::Me::::::eeeeeeeeeee        s::::::s   h:::::h     h:::::h        X:::::X X:::::X    *</div>
<div class="line">* M::::::M     MMMMM     M::::::Me:::::::e           ssssss   s:::::s h:::::h     h:::::h     XXX:::::X   X:::::XXX *</div>
<div class="line">* M::::::M               M::::::Me::::::::e          s:::::ssss::::::sh:::::h     h:::::h     X::::::X     X::::::X *</div>
<div class="line">* M::::::M               M::::::M e::::::::eeeeeeee  s::::::::::::::s h:::::h     h:::::h     X:::::X       X:::::X *</div>
<div class="line">* M::::::M               M::::::M  ee:::::::::::::e   s:::::::::::ss  h:::::h     h:::::h     X:::::X       X:::::X *</div>
<div class="line">* MMMMMMMM               MMMMMMMM    eeeeeeeeeeeeee    sssssssssss    hhhhhhh     hhhhhhh     XXXXXXX       XXXXXXX *</div>
<div class="line">*********************************************************************************************************************</div>
</div><!-- fragment --><p><a href="https://github.com/pranjalchanda08/MeshX/actions/workflows/ci.yml"><img src="https://github.com/pranjalchanda08/MeshX/actions/workflows/build_ci.yml/badge.svg" alt="CI Pipeline:main" style="pointer-events: none;" class="inline"/></a> <img src="https://img.shields.io/badge/Release-v0.4-blue" alt="Release" class="inline"/></p>
<p>MeshX is a portable C implementation of a Bluetooth Low Energy (BLE) Mesh node stack and example components. It is designed to be portable across board support packages (BSPs), microcontroller units (MCUs) and SDKs via a CMake-driven build system and small platform abstraction layers.</p>
<p>This README documents the new portability model, the BSP/MCU/SDK support available in this repository, and how to build MeshX using the CMake-level build system.</p>
<h1><a class="anchor" id="autotoc_md20"></a>
Contributing</h1>
<p>Contributions that add BSPs or improve portability are welcome. Please follow repository conventions and add CMake glue under <code>port/bsp</code> and <code>port/platform</code>.</p>
<p><a href="https://discord.gg/ezkCzchun"><img src="https://dcbadge.limes.pink/api/server/ezkCzchun" alt="" class="inline"/></a></p>
<h1><a class="anchor" id="autotoc_md21"></a>
Highlights</h1>
<ul>
<li>Portable CMake-based build integration for multiple BSPs and MCUs</li>
<li>Current MCU family: <code>esp</code> with supported MCU: <code>esp32, esp32c3</code></li>
<li>SDK integration: ESP-IDF (driven by the <code>IDF_PATH</code> environment variable)</li>
<li>CMake options to select BSP, product profile, and build an executable</li>
</ul>
<h1><a class="anchor" id="autotoc_md22"></a>
Repository layout (relevant parts)</h1>
<ul>
<li><code>CMakeLists.txt</code> - Top-level CMake entry. Defines project variables and includes the selected BSP.</li>
<li><code>main/CMakeLists.txt</code> - Collects sources from <code>main/component/meshx</code> and registers the component with the platform.</li>
<li><code>port/bsp/</code> - BSPs live here. Each BSP contains board-specific CMake configuration and product profiles.</li>
<li><code>port/platform/esp/</code> - ESP platform integration (ESP-IDF glue and esp32c3 support files).</li>
<li><code>tools/scripts/</code> - Helper scripts and code-generation utilities (<code>code_gen.py</code>, <code>meshx.py</code>, etc.).</li>
</ul>
<h1><a class="anchor" id="autotoc_md23"></a>
Supported BSPs / MCUs / SDKs (current)</h1>
<h2><a class="anchor" id="autotoc_md24"></a>
BSPs</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">BSP name   </th><th class="markdownTableHeadNone">Board / Notes   </th><th class="markdownTableHeadNone">Location (CMake)    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">weact_c3   </td><td class="markdownTableBodyNone">WeAct ESP32-C3 development board   </td><td class="markdownTableBodyNone"><code>port/bsp/weact_c3/bsp.cmake</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">esp32-devkitC   </td><td class="markdownTableBodyNone">ESP32 WROOM Development board   </td><td class="markdownTableBodyNone"><code>port/bsp/esp32_devkitC/bsp.cmake</code>   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md25"></a>
MCU families / targets</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">MCU family   </th><th class="markdownTableHeadNone">Target   </th><th class="markdownTableHeadNone">Notes / Location    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">esp   </td><td class="markdownTableBodyNone">esp32   </td><td class="markdownTableBodyNone"><code>port/platform/esp/esp32/esp32.cmake</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">esp   </td><td class="markdownTableBodyNone">esp32c3   </td><td class="markdownTableBodyNone"><code>port/platform/esp/esp32c3/esp32c3.cmake</code>   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md26"></a>
SDKs / Integrations</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">SDK   </th><th class="markdownTableHeadNone">Integration notes   </th><th class="markdownTableHeadNone">Required env / file    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ESP-IDF   </td><td class="markdownTableBodyNone">ESP-IDF integration via <code>port/platform/esp/esp_idf/esp_idf.cmake</code>. Uses <code>idf_component_register</code> under the hood.   </td><td class="markdownTableBodyNone"><code>IDF_PATH</code> environment variable; run <code>$IDF_PATH/export.sh</code>   </td></tr>
</table>
<p>If you want to add support for another BSP or MCU, add a directory under <code>port/bsp/</code> for the BSP and a corresponding <code>port/platform/&lt;family&gt;/&lt;mcu&gt;/&lt;mcu&gt;.cmake</code> for the MCU/platform glue.</p>
<h1><a class="anchor" id="autotoc_md27"></a>
CMake-level build system</h1>
<p>MeshX is driven from the top-level <code>CMakeLists.txt</code>. The most important CMake options you can set are:</p>
<ul>
<li><code>-DBSP=&lt;bsp-name&gt;</code> — Select which BSP to include. Default: <code>weact_c3</code>.</li>
<li><code>-DPROD_NAME=&lt;product_name&gt;</code> — Required product name used by the code generation pipeline.</li>
<li><code>-DPROD_PROFILE=&lt;path&gt;</code> — Path to the product profile YAML (defaults to <code>port/bsp/${BSP}/prod_profile.yml</code>).</li>
<li><code>-DIDF_PATH=&lt;path&gt;</code> — (Exported as environment variable) The ESP-IDF path is read from the <code>IDF_PATH</code> environment variable.</li>
<li><code>-DELF=&lt;executable_name&gt;</code> — Name of the final CMake project/ELF. Default set in top-level CMake.</li>
<li><code>-DENABLE_TESTS=ON</code> — Enable unit tests if the chosen platform supports it.</li>
</ul>
<p>Important: product code generation happens at configure time via tools/scripts/code_gen.py and must run before building. To simplify and standardize the configure/build/codegen flow we now provide tools/scripts/meshx.py which wraps the generator, CMake configure, and build steps.</p>
<p>Examples — single-command wrapper (recommended)</p>
<ol type="1">
<li>Set up Build environment:</li>
</ol>
<div class="fragment"><div class="line">$ source tools/scripts/env.sh {extra setup execution command}</div>
<div class="line"># source tools/scripts/env.sh source path/to/esp/idf/export.sh to activate ESP-IDF env as well</div>
</div><!-- fragment --><ol type="1">
<li>Use the build helper:</li>
</ol>
<div class="fragment"><div class="line">$ meshx.py --help</div>
<div class="line">usage: meshx.py [-h] [--list-bsp] [--clean] [--bsp {...}] [--prod-name PROD_NAME [PROD_NAME ...]]</div>
<div class="line">                      [--prod-profile PROD_PROFILE] [--build-type {Debug,Release}] [--menuconfig]</div>
<div class="line"> </div>
<div class="line">Build MeshX project.</div>
<div class="line"> </div>
<div class="line">options:</div>
<div class="line">  -h, --help            show this help message and exit</div>
<div class="line">  --version             Get the version details of meshx.py</div>
<div class="line">  --list-bsp            List available BSPs and exit.</div>
<div class="line">  --clean               Clean the build directory before building.</div>
<div class="line">  --bsp {...}</div>
<div class="line">                        Specify the BSP to use.</div>
<div class="line">  --prod-name PROD_NAME [PROD_NAME ...]</div>
<div class="line">                        Specify the product name.</div>
<div class="line">  --prod-profile PROD_PROFILE</div>
<div class="line">                        Specify the product profile.</div>
<div class="line">  --build-type {Debug,Release}</div>
<div class="line">                        Specify the build type.</div>
<div class="line"> </div>
<div class="line">ESP targets:</div>
<div class="line">  --menuconfig          call ninja menuconfig after cmake</div>
</div><!-- fragment --><div class="fragment"><div class="line">$ meshx.py --bsp weact_c3 --prod 4_relay_panel --profile port/bsp/weact_c3/prod_profile.yml --build-dir build</div>
</div><!-- fragment --><p>The script will:</p><ul>
<li>run the code generator to produce product-specific sources and headers,</li>
<li>configure CMake in the specified build directory with recommended flags,</li>
<li>run the configured build (and optionally run tests or package artifacts).</li>
</ul>
<p>For advanced usage the script exposes subcommands and flags to only run code generation, configure, or build separately; run it with <code>--help</code> to see available options.</p>
<p>Notes on environment and code generation</p>
<ul>
<li><code>PROD_NAME</code> (or <code>--prod</code>) is required; the build helper will error if the product is not found.</li>
<li>The build helper invokes <code>tools/scripts/code_gen.py</code> and ensures generated files are placed where CMake expects them.</li>
<li>You can still run the underlying steps manually (code_gen.py + cmake configure/build) but using meshx.py ensures reproducible CI-friendly defaults and avoids common mistakes.</li>
</ul>
<p>Using the included helper scripts</p>
<ul>
<li>tools/scripts/meshx.py — new top-level helper that wraps code generation, CMake configure, and build steps. Preferred for local development and CI.</li>
<li>tools/scripts/build_ci.sh — CI-oriented wrapper (may call meshx.py internally).</li>
<li>tools/scripts/code_gen.py — lower-level generator used by the helper; useful for debugging or validating profiles manually.</li>
</ul>
<h2><a class="anchor" id="autotoc_md28"></a>
Product and model profiles</h2>
<ul>
<li>Product profiles live in <code>port/bsp/&lt;bsp&gt;/prod_profile.yml</code>. Add a product by adding an entry under the <code>products</code> mapping. The build scripts and <code>code_gen.py</code> will read this profile to generate product-specific composition files.</li>
<li>Model profiles are under <code>tools/scripts/model_profile.yml</code> (used by the code generator).</li>
</ul>
<h2><a class="anchor" id="autotoc_md29"></a>
Writing a custom product profile (prod_profile.yml)</h2>
<p>If you want to add a new product for a BSP, create or edit <code>port/bsp/&lt;bsp&gt;/prod_profile.yml</code> and add a product entry under the <code>products</code> mapping. The product profile describes the product id, CID, elements and optional components.</p>
<h3><a class="anchor" id="autotoc_md30"></a>
Minimum product entry example</h3>
<div class="fragment"><div class="line">prod:</div>
<div class="line">  cid: 0x7908</div>
<div class="line">  products:</div>
<div class="line">    - name: my_new_product</div>
<div class="line">      pid: 0x0100</div>
<div class="line">      elements:</div>
<div class="line">      - switch_relay_server: 2</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md31"></a>
Fields explained</h3>
<ul>
<li>prod.cid: Company identifier for the product set (hex integer).</li>
<li>products[].name: Human- and tool-friendly product name (string). This name is used as <code>PROD_NAME</code> when invoking the build.</li>
<li>products[].pid: Product ID (hex integer).</li>
<li>products[].elements: Ordered list of elements used by the product. Each element is expressed as a mapping of element-name:instance-count. Element names must match keys in <code>tools/scripts/model_profile.yml</code> under <code>elements</code>.</li>
<li>products[].components (optional): list of small component toggles, e.g. <code>- unit_test: true</code>.</li>
</ul>
<h3><a class="anchor" id="autotoc_md32"></a>
Practical example (based on <code>tools/scripts/prod_profile.ci.yml</code>)</h3>
<div class="fragment"><div class="line">prod:</div>
<div class="line">  cid: 0x7908</div>
<div class="line">  products:</div>
<div class="line">  - name: 4_relay_panel</div>
<div class="line">    pid: 0x0001</div>
<div class="line">    elements:</div>
<div class="line">    - switch_relay_server: 4</div>
<div class="line">  - name: all_in_one</div>
<div class="line">    pid: 0x0004</div>
<div class="line">    elements:</div>
<div class="line">    - switch_relay_client: 1</div>
<div class="line">    - switch_relay_server: 1</div>
<div class="line">    - light_cwww_server: 1</div>
<div class="line">    - light_cwww_client: 1</div>
<div class="line">    components:</div>
<div class="line">    - unit_test: true</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md33"></a>
How MeshX uses the profile</h3>
<ul>
<li><code>tools/scripts/code_gen.py</code> reads the product profile and <code>tools/scripts/model_profile.yml</code> and constructs:<ul>
<li>compile-time macros (e.g. <code>CONFIG_PID_ID</code>, <code>CONFIG_MAX_ELEMENT_COUNT</code>) written into <code>meshx_config.h</code>.</li>
<li>a list of source files and include directories from the selected elements and models so the build system can register them.</li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md34"></a>
Testing a product profile locally</h3>
<ol type="1">
<li>Choose your BSP and ensure you have the BSP's <code>prod_profile.yml</code> (for quick tests you can copy <code>tools/scripts/prod_profile.ci.yml</code> to <code>port/bsp/weact_c3/prod_profile.yml</code>).</li>
<li>Run the code generator directly to verify it finds the product and creates <code>meshx_config.h</code>:</li>
</ol>
<div class="fragment"><div class="line">$ code_gen.py 4_relay_panel --root main/component/meshx --config main/component/meshx/default/inc --profile tools/scripts/prod_profile.ci.yml</div>
<div class="line"> </div>
<div class="line"># Inspect the generated header</div>
<div class="line">$ ls -l main/component/meshx/default/inc/meshx_config.h</div>
<div class="line">$ cat main/component/meshx/default/inc/meshx_config.h</div>
</div><!-- fragment --><ol type="1">
<li>If the generator complains <code>Product Not Found</code>, check that <code>products[].name</code> exactly matches the name you passed to <code>code_gen.py</code> / <code>--prod</code>.</li>
</ol>
<h2><a class="anchor" id="autotoc_md35"></a>
Notes and tips</h2>
<ul>
<li>Always re-run the build helper (or re-run the configure step) after changing product profiles because the profile is processed at configure time.</li>
<li>Use <code>tools/scripts/model_profile.yml</code> to see available element names and how they map to source paths and macros.</li>
<li>Keep <code>pid</code> values unique within a <code>cid</code> namespace to avoid accidental conflicts when you test product identification.</li>
</ul>
<h2><a class="anchor" id="autotoc_md36"></a>
Flashing and monitoring (ESP-IDF)</h2>
<p>When building for ESP-IDF targets, the typical flash+monitor flow uses <code>idf.py</code> provided by ESP-IDF. For example:</p>
<div class="fragment"><div class="line"># from the build directory configured with ESP-IDF environment</div>
<div class="line">$ idf.py -p /dev/ttyUSB0 flash monitor</div>
</div><!-- fragment --><p>If you are using the build helper it will generate an IDF project and artifacts compatible with <code>idf.py</code>.</p>
<h2><a class="anchor" id="autotoc_md37"></a>
Adding support for new boards, MCUs or SDKs</h2>
<ol type="1">
<li>Add a BSP: create <code>port/bsp/&lt;your_bsp&gt;/bsp.cmake</code> and a <code>prod_profile.yml</code> for your board. Follow the pattern established by <code>weact_c3</code>.</li>
<li>Add a platform glue directory: <code>port/platform/&lt;family&gt;/&lt;mcu&gt;/&lt;mcu&gt;.cmake</code> that sets <code>BASE_PLAT_SRC</code>, <code>BASE_PLAT_INC</code>, <code>PLAT_LIBS</code>, and exposes <code>register_component()</code> that maps to your target SDK build helpers.</li>
<li>If integrating with a new SDK, provide a small <code>register_component()</code> implementation that wires MeshX sources into that SDK's build system (for ESP-IDF we call <code>idf_component_register</code>).</li>
</ol>
<h3><a class="anchor" id="autotoc_md38"></a>
Templates and a step-by-step example</h3>
<p>To make it easier to add a new BSP or MCU, this repository includes simple templates you can copy and adapt:</p>
<ul>
<li><code>port/bsp/template_bsp/bsp.cmake</code> — minimal BSP CMake that validates <code>PROD_NAME</code> and includes platform glue.</li>
<li><code>port/bsp/template_bsp/prod_profile.yml</code> — example product profile you can start from.</li>
<li><code>port/platform/template_family/template_mcu/template_mcu.cmake</code> — minimal platform glue template you can adapt to your SDK.</li>
</ul>
<p>Quick step-by-step: add a new BSP + MCU</p>
<ol type="1">
<li>Copy the BSP template and update variables:</li>
</ol>
<div class="fragment"><div class="line">$ cp -r port/bsp/template_bsp port/bsp/my_board</div>
<div class="line"># Edit port/bsp/my_board/bsp.cmake and set BOARD_NAME, BOARD_MCU, MCU_FAMILY</div>
</div><!-- fragment --><ol type="1">
<li>Copy and edit the product profile for your board:</li>
</ol>
<div class="fragment"><div class="line">$ cp port/bsp/template_bsp/prod_profile.yml port/bsp/my_board/prod_profile.yml</div>
<div class="line"># Edit prod_profile.yml: set cid, add products[].name, pid, and elements</div>
</div><!-- fragment --><ol type="1">
<li>Create platform glue for your MCU family/target by copying the template and filling in SDK specifics:</li>
</ol>
<div class="fragment"><div class="line">$ mkdir -p port/platform/my_family/my_mcu</div>
<div class="line">$ cp port/platform/template_family/template_mcu/template_mcu.cmake port/platform/my_family/my_mcu/my_mcu.cmake</div>
<div class="line"># Edit my_mcu.cmake to set BASE_PLAT_INC, BASE_PLAT_SRC, PLAT_LIBS and implement register_component() using your SDK&#39;s API</div>
</div><!-- fragment --><ol type="1">
<li>Configure a local build using the build helper:</li>
</ol>
<div class="fragment"><div class="line">$ meshx.py --bsp my_board --prod example_product --profile port/bsp/my_board/prod_profile.yml --build-dir build</div>
</div><!-- fragment --><ol type="1">
<li>Flash / monitor using your SDK's toolchain (for ESP-IDF use <code>idf.py</code>) after the build completes.</li>
</ol>
<h2><a class="anchor" id="autotoc_md39"></a>
Troubleshooting &amp; tips</h2>
<ul>
<li>If the build helper fails with "PROD_NAME is not set" or "Product Not Found", verify the product name and profile path.</li>
<li>Ensure <code>IDF_PATH</code> is exported and <code>source $IDF_PATH/export.sh</code> has been run when building ESP targets.</li>
<li><code>tools/scripts/code_gen.py</code> is invoked by the build helper at configure time. If you change product profiles, re-run the helper to regenerate sources. </li>
</ul>
</div></div><!-- PageDoc -->
<a href="doxygen_crawl.html"></a>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Oct 30 2025 16:11:43 for MeshX by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2
</small></address>
</div><!-- doc-content -->
</body>
</html>
