<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MeshX: meshx_nvs_interface.h File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">MeshX<span id="projectnumber">&#160;0.4</span>
   </div>
   <div id="projectbrief">This repository provides an implementation for Bluetooth Low Energy (BLE) Mesh network nodes. The project allows you to create BLE mesh nodes that can communicate with each other, enabling the development of smart home solutions or other IoT-based applications.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_5c982d53a68cdbcd421152b4020263a9.html">main</a></li><li class="navelem"><a class="el" href="../../dir_8c5515a604d4a2bb78291420d5b72747.html">component</a></li><li class="navelem"><a class="el" href="../../dir_17e62e33567b93c5a1475a84b6c9c934.html">meshx</a></li><li class="navelem"><a class="el" href="../../dir_86bf887972b3e0a7dcf1ab1624617c1e.html">inc</a></li><li class="navelem"><a class="el" href="../../dir_1c8fb1a332d5375a708e5a5430cbb29d.html">interface</a></li><li class="navelem"><a class="el" href="../../dir_2197ee0c1360b52aa38ae929a300cede.html">utils</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">meshx_nvs_interface.h File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="../../da/d68/meshx__err_8h_source.html">meshx_err.h</a>&quot;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;stddef.h&gt;</code><br />
</div>
<p><a href="../../da/d2d/meshx__nvs__interface_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a15b34ee0dff883205fa21a0594fc0c7c" id="r_a15b34ee0dff883205fa21a0594fc0c7c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../da/d68/meshx__err_8h.html#a6f984f69fa8d0240992b3a1e78bd42f6">meshx_err_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a15b34ee0dff883205fa21a0594fc0c7c">meshx_nvs_plat_open</a> (uintptr_t *p_nvs_handle)</td></tr>
<tr class="memdesc:a15b34ee0dff883205fa21a0594fc0c7c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open non-volatile storage with a given namespace from the default partition.  <br /></td></tr>
<tr class="separator:a15b34ee0dff883205fa21a0594fc0c7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5a8b76fa8a5b7105ee6cac1edb47ec3" id="r_ad5a8b76fa8a5b7105ee6cac1edb47ec3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../da/d68/meshx__err_8h.html#a6f984f69fa8d0240992b3a1e78bd42f6">meshx_err_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad5a8b76fa8a5b7105ee6cac1edb47ec3">meshx_nvs_plat_close</a> (uintptr_t p_nvs_handle)</td></tr>
<tr class="memdesc:ad5a8b76fa8a5b7105ee6cac1edb47ec3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Close the non-volatile storage handle.  <br /></td></tr>
<tr class="separator:ad5a8b76fa8a5b7105ee6cac1edb47ec3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01998c5a615417f7fd4c8e3e6aa06a61" id="r_a01998c5a615417f7fd4c8e3e6aa06a61"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../da/d68/meshx__err_8h.html#a6f984f69fa8d0240992b3a1e78bd42f6">meshx_err_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a01998c5a615417f7fd4c8e3e6aa06a61">meshx_nvs_plat_read</a> (uintptr_t p_nvs_handle, char const *key, uint8_t *p_data, uint16_t len)</td></tr>
<tr class="memdesc:a01998c5a615417f7fd4c8e3e6aa06a61"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read blob value for given key from non-volatile storage.  <br /></td></tr>
<tr class="separator:a01998c5a615417f7fd4c8e3e6aa06a61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a486367a843345efbb5edb7267a706eb3" id="r_a486367a843345efbb5edb7267a706eb3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../da/d68/meshx__err_8h.html#a6f984f69fa8d0240992b3a1e78bd42f6">meshx_err_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a486367a843345efbb5edb7267a706eb3">meshx_nvs_plat_write</a> (uintptr_t p_nvs_handle, char const *key, uint8_t const *p_data, uint16_t len)</td></tr>
<tr class="memdesc:a486367a843345efbb5edb7267a706eb3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a blob value to the non-volatile storage with a given key and namespace.  <br /></td></tr>
<tr class="separator:a486367a843345efbb5edb7267a706eb3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac07e3fa684f8bd4f45c595c237b98504" id="r_ac07e3fa684f8bd4f45c595c237b98504"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../da/d68/meshx__err_8h.html#a6f984f69fa8d0240992b3a1e78bd42f6">meshx_err_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac07e3fa684f8bd4f45c595c237b98504">meshx_nvs_plat_erase</a> (uintptr_t p_nvs_handle)</td></tr>
<tr class="memdesc:ac07e3fa684f8bd4f45c595c237b98504"><td class="mdescLeft">&#160;</td><td class="mdescRight">Erase all key-value pairs in the given namespace.  <br /></td></tr>
<tr class="separator:ac07e3fa684f8bd4f45c595c237b98504"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4731c0a5821db05dfc78f395caf73dd" id="r_ac4731c0a5821db05dfc78f395caf73dd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../da/d68/meshx__err_8h.html#a6f984f69fa8d0240992b3a1e78bd42f6">meshx_err_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac4731c0a5821db05dfc78f395caf73dd">meshx_nvs_plat_remove</a> (uintptr_t p_nvs_handle, char const *key)</td></tr>
<tr class="memdesc:ac4731c0a5821db05dfc78f395caf73dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove a key-value pair from the non-volatile storage with a given key and namespace.  <br /></td></tr>
<tr class="separator:ac4731c0a5821db05dfc78f395caf73dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5dd0ef1876320dd92b9c102574e08435" id="r_a5dd0ef1876320dd92b9c102574e08435"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../da/d68/meshx__err_8h.html#a6f984f69fa8d0240992b3a1e78bd42f6">meshx_err_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5dd0ef1876320dd92b9c102574e08435">meshx_nvs_plat_commit</a> (uintptr_t p_nvs_handle)</td></tr>
<tr class="memdesc:a5dd0ef1876320dd92b9c102574e08435"><td class="mdescLeft">&#160;</td><td class="mdescRight">Commit changes to the non-volatile storage.  <br /></td></tr>
<tr class="separator:a5dd0ef1876320dd92b9c102574e08435"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="ad5a8b76fa8a5b7105ee6cac1edb47ec3" name="ad5a8b76fa8a5b7105ee6cac1edb47ec3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5a8b76fa8a5b7105ee6cac1edb47ec3">&#9670;&#160;</a></span>meshx_nvs_plat_close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../da/d68/meshx__err_8h.html#a6f984f69fa8d0240992b3a1e78bd42f6">meshx_err_t</a> meshx_nvs_plat_close </td>
          <td>(</td>
          <td class="paramtype">uintptr_t</td>          <td class="paramname"><span class="paramname"><em>p_nvs_handle</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Close the non-volatile storage handle. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p_nvs_handle</td><td>Handle obtained with meshx_nvs_plat_open.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>MESHX_SUCCESS if the handle was closed successfully</li>
<li>MESHX_ERR_PLAT for any platform error </li>
</ul>
</dd></dl>
<div class="fragment"><div class="line"><span class="lineno">   73</span>{</div>
<div class="line"><span class="lineno">   74</span> </div>
<div class="line"><span class="lineno">   75</span>    nvs_close((nvs_handle_t)p_nvs_handle);</div>
<div class="line"><span class="lineno">   76</span> </div>
<div class="line"><span class="lineno">   77</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../da/d68/meshx__err_8h.html#a6f984f69fa8d0240992b3a1e78bd42f6a0bcfcbc6db2a31dd3b3c3a91d999841b">MESHX_SUCCESS</a>;</div>
<div class="line"><span class="lineno">   78</span>}</div>
<div class="ttc" id="ameshx__err_8h_html_a6f984f69fa8d0240992b3a1e78bd42f6a0bcfcbc6db2a31dd3b3c3a91d999841b"><div class="ttname"><a href="../../da/d68/meshx__err_8h.html#a6f984f69fa8d0240992b3a1e78bd42f6a0bcfcbc6db2a31dd3b3c3a91d999841b">MESHX_SUCCESS</a></div><div class="ttdeci">@ MESHX_SUCCESS</div><div class="ttdef"><b>Definition</b> meshx_err.h:40</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5dd0ef1876320dd92b9c102574e08435" name="a5dd0ef1876320dd92b9c102574e08435"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5dd0ef1876320dd92b9c102574e08435">&#9670;&#160;</a></span>meshx_nvs_plat_commit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../da/d68/meshx__err_8h.html#a6f984f69fa8d0240992b3a1e78bd42f6">meshx_err_t</a> meshx_nvs_plat_commit </td>
          <td>(</td>
          <td class="paramtype">uintptr_t</td>          <td class="paramname"><span class="paramname"><em>p_nvs_handle</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Commit changes to the non-volatile storage. </p>
<dl class="section note"><dt>Note</dt><dd>This function is a prototype and can be returned with MESHX_SUCCESS if no such platform function exists</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p_nvs_handle</td><td>Pointer to the opened handle.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>MESHX_SUCCESS if the changes were committed successfully</li>
<li>MESHX_ERR_PLAT for any platform error </li>
</ul>
</dd></dl>
<div class="fragment"><div class="line"><span class="lineno">  209</span>{</div>
<div class="line"><span class="lineno">  210</span>    esp_err_t err = ESP_OK;</div>
<div class="line"><span class="lineno">  211</span> </div>
<div class="line"><span class="lineno">  212</span>    err = nvs_commit((nvs_handle_t)p_nvs_handle);</div>
<div class="line"><span class="lineno">  213</span> </div>
<div class="line"><span class="lineno">  214</span>    <span class="keywordflow">if</span> (err != ESP_OK)</div>
<div class="line"><span class="lineno">  215</span>    {</div>
<div class="line"><span class="lineno">  216</span>        <a class="code hl_define" href="../../d7/dcb/meshx__log_8h.html#a56673888067cbe14c7a33b0856f46eb8">MESHX_LOGE</a>(<a class="code hl_enumvalue" href="../../d3/da1/module__id_8h.html#ac6141ce7b2d1d07b28553017c6a3aedca294f5c4e583ed87401713ad84945e322">MODULE_ID_COMMON</a>, <span class="stringliteral">&quot;nvs_commit failed&quot;</span>);</div>
<div class="line"><span class="lineno">  217</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../da/d68/meshx__err_8h.html#a6f984f69fa8d0240992b3a1e78bd42f6a6c085ef760a07c6f5b9422e1590fde8d">MESHX_ERR_PLAT</a>;</div>
<div class="line"><span class="lineno">  218</span>    }</div>
<div class="line"><span class="lineno">  219</span> </div>
<div class="line"><span class="lineno">  220</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../da/d68/meshx__err_8h.html#a6f984f69fa8d0240992b3a1e78bd42f6a0bcfcbc6db2a31dd3b3c3a91d999841b">MESHX_SUCCESS</a>;</div>
<div class="line"><span class="lineno">  221</span>}</div>
<div class="ttc" id="ameshx__err_8h_html_a6f984f69fa8d0240992b3a1e78bd42f6a6c085ef760a07c6f5b9422e1590fde8d"><div class="ttname"><a href="../../da/d68/meshx__err_8h.html#a6f984f69fa8d0240992b3a1e78bd42f6a6c085ef760a07c6f5b9422e1590fde8d">MESHX_ERR_PLAT</a></div><div class="ttdeci">@ MESHX_ERR_PLAT</div><div class="ttdef"><b>Definition</b> meshx_err.h:43</div></div>
<div class="ttc" id="ameshx__log_8h_html_a56673888067cbe14c7a33b0856f46eb8"><div class="ttname"><a href="../../d7/dcb/meshx__log_8h.html#a56673888067cbe14c7a33b0856f46eb8">MESHX_LOGE</a></div><div class="ttdeci">#define MESHX_LOGE(module_id, format,...)</div><div class="ttdef"><b>Definition</b> meshx_log.h:67</div></div>
<div class="ttc" id="amodule__id_8h_html_ac6141ce7b2d1d07b28553017c6a3aedca294f5c4e583ed87401713ad84945e322"><div class="ttname"><a href="../../d3/da1/module__id_8h.html#ac6141ce7b2d1d07b28553017c6a3aedca294f5c4e583ed87401713ad84945e322">MODULE_ID_COMMON</a></div><div class="ttdeci">@ MODULE_ID_COMMON</div><div class="ttdef"><b>Definition</b> module_id.h:32</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac07e3fa684f8bd4f45c595c237b98504" name="ac07e3fa684f8bd4f45c595c237b98504"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac07e3fa684f8bd4f45c595c237b98504">&#9670;&#160;</a></span>meshx_nvs_plat_erase()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../da/d68/meshx__err_8h.html#a6f984f69fa8d0240992b3a1e78bd42f6">meshx_err_t</a> meshx_nvs_plat_erase </td>
          <td>(</td>
          <td class="paramtype">uintptr_t</td>          <td class="paramname"><span class="paramname"><em>p_nvs_handle</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Erase all key-value pairs in the given namespace. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p_nvs_handle</td><td>Pointer to the opened handle.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>MESHX_SUCCESS if all key-value pairs were erased successfully</li>
<li>MESHX_ERR_PLAT for any platform error </li>
</ul>
</dd></dl>
<div class="fragment"><div class="line"><span class="lineno">  157</span>{</div>
<div class="line"><span class="lineno">  158</span>    esp_err_t err = ESP_OK;</div>
<div class="line"><span class="lineno">  159</span> </div>
<div class="line"><span class="lineno">  160</span>    err = nvs_erase_all((nvs_handle_t)p_nvs_handle);</div>
<div class="line"><span class="lineno">  161</span> </div>
<div class="line"><span class="lineno">  162</span>    <span class="keywordflow">if</span> (err != ESP_OK)</div>
<div class="line"><span class="lineno">  163</span>    {</div>
<div class="line"><span class="lineno">  164</span>        <a class="code hl_define" href="../../d7/dcb/meshx__log_8h.html#a56673888067cbe14c7a33b0856f46eb8">MESHX_LOGE</a>(<a class="code hl_enumvalue" href="../../d3/da1/module__id_8h.html#ac6141ce7b2d1d07b28553017c6a3aedca294f5c4e583ed87401713ad84945e322">MODULE_ID_COMMON</a>, <span class="stringliteral">&quot;nvs_erase_all failed&quot;</span>);</div>
<div class="line"><span class="lineno">  165</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../da/d68/meshx__err_8h.html#a6f984f69fa8d0240992b3a1e78bd42f6a6c085ef760a07c6f5b9422e1590fde8d">MESHX_ERR_PLAT</a>;</div>
<div class="line"><span class="lineno">  166</span>    }</div>
<div class="line"><span class="lineno">  167</span> </div>
<div class="line"><span class="lineno">  168</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../da/d68/meshx__err_8h.html#a6f984f69fa8d0240992b3a1e78bd42f6a0bcfcbc6db2a31dd3b3c3a91d999841b">MESHX_SUCCESS</a>;</div>
<div class="line"><span class="lineno">  169</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a15b34ee0dff883205fa21a0594fc0c7c" name="a15b34ee0dff883205fa21a0594fc0c7c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a15b34ee0dff883205fa21a0594fc0c7c">&#9670;&#160;</a></span>meshx_nvs_plat_open()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../da/d68/meshx__err_8h.html#a6f984f69fa8d0240992b3a1e78bd42f6">meshx_err_t</a> meshx_nvs_plat_open </td>
          <td>(</td>
          <td class="paramtype">uintptr_t *</td>          <td class="paramname"><span class="paramname"><em>p_nvs_handle</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Open non-volatile storage with a given namespace from the default partition. </p>
<p>If CONFIG_BLE_MESH_SPECIFIC_PARTITION is not defined, this function will open the namespace from the default partition. Otherwise, it will open the namespace from the MESHX_NVS_PARTITION.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">p_nvs_handle</td><td>Pointer to the output variable populated with the opened handle.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>MESHX_SUCCESS if the storage handle was opened successfully</li>
<li>MESHX_ERR_PLAT if p_nvs_handle is NULL </li>
</ul>
</dd></dl>
<div class="fragment"><div class="line"><span class="lineno">   35</span>{</div>
<div class="line"><span class="lineno">   36</span>    <span class="keywordflow">if</span> (p_nvs_handle == NULL)</div>
<div class="line"><span class="lineno">   37</span>    {</div>
<div class="line"><span class="lineno">   38</span>        <a class="code hl_define" href="../../d7/dcb/meshx__log_8h.html#a56673888067cbe14c7a33b0856f46eb8">MESHX_LOGE</a>(<a class="code hl_enumvalue" href="../../d3/da1/module__id_8h.html#ac6141ce7b2d1d07b28553017c6a3aedca294f5c4e583ed87401713ad84945e322">MODULE_ID_COMMON</a>, <span class="stringliteral">&quot;Invalid argument&quot;</span>);</div>
<div class="line"><span class="lineno">   39</span>    }</div>
<div class="line"><span class="lineno">   40</span> </div>
<div class="line"><span class="lineno">   41</span>    esp_err_t err = ESP_OK;</div>
<div class="line"><span class="lineno">   42</span><span class="preprocessor">#ifndef CONFIG_BLE_MESH_SPECIFIC_PARTITION</span></div>
<div class="line"><span class="lineno">   43</span>    err = nvs_open(</div>
<div class="line"><span class="lineno">   44</span>        <a class="code hl_define" href="../../dc/d28/esp__nvs_8c.html#a0c55d54c5feb782f12273dfc2d6fe002">MESHX_NVS_NAMESPACE</a>,</div>
<div class="line"><span class="lineno">   45</span>        NVS_READWRITE,</div>
<div class="line"><span class="lineno">   46</span>        (nvs_handle_t*)p_nvs_handle);</div>
<div class="line"><span class="lineno">   47</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno">   48</span>    err = nvs_open_from_partition(</div>
<div class="line"><span class="lineno">   49</span>        MESHX_NVS_PARTITION,</div>
<div class="line"><span class="lineno">   50</span>        <a class="code hl_define" href="../../dc/d28/esp__nvs_8c.html#a0c55d54c5feb782f12273dfc2d6fe002">MESHX_NVS_NAMESPACE</a>,</div>
<div class="line"><span class="lineno">   51</span>        NVS_READWRITE,</div>
<div class="line"><span class="lineno">   52</span>        (nvs_handle_t*)p_nvs_handle);</div>
<div class="line"><span class="lineno">   53</span><span class="preprocessor">#endif </span><span class="comment">/* CONFIG_BLE_MESH_SPECIFIC_PARTITION */</span><span class="preprocessor"></span></div>
<div class="line"><span class="lineno">   54</span> </div>
<div class="line"><span class="lineno">   55</span>    <span class="keywordflow">if</span> (err != ESP_OK)</div>
<div class="line"><span class="lineno">   56</span>    {</div>
<div class="line"><span class="lineno">   57</span>        <a class="code hl_define" href="../../d7/dcb/meshx__log_8h.html#a56673888067cbe14c7a33b0856f46eb8">MESHX_LOGE</a>(<a class="code hl_enumvalue" href="../../d3/da1/module__id_8h.html#ac6141ce7b2d1d07b28553017c6a3aedca294f5c4e583ed87401713ad84945e322">MODULE_ID_COMMON</a>, <span class="stringliteral">&quot;Failed to open NVS handle: %d&quot;</span>, err);</div>
<div class="line"><span class="lineno">   58</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../da/d68/meshx__err_8h.html#a6f984f69fa8d0240992b3a1e78bd42f6a6c085ef760a07c6f5b9422e1590fde8d">MESHX_ERR_PLAT</a>;</div>
<div class="line"><span class="lineno">   59</span>    }</div>
<div class="line"><span class="lineno">   60</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../da/d68/meshx__err_8h.html#a6f984f69fa8d0240992b3a1e78bd42f6a0bcfcbc6db2a31dd3b3c3a91d999841b">MESHX_SUCCESS</a>;</div>
<div class="line"><span class="lineno">   61</span>}</div>
<div class="ttc" id="aesp__nvs_8c_html_a0c55d54c5feb782f12273dfc2d6fe002"><div class="ttname"><a href="../../dc/d28/esp__nvs_8c.html#a0c55d54c5feb782f12273dfc2d6fe002">MESHX_NVS_NAMESPACE</a></div><div class="ttdeci">#define MESHX_NVS_NAMESPACE</div><div class="ttdef"><b>Definition</b> esp_nvs.c:19</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a01998c5a615417f7fd4c8e3e6aa06a61" name="a01998c5a615417f7fd4c8e3e6aa06a61"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a01998c5a615417f7fd4c8e3e6aa06a61">&#9670;&#160;</a></span>meshx_nvs_plat_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../da/d68/meshx__err_8h.html#a6f984f69fa8d0240992b3a1e78bd42f6">meshx_err_t</a> meshx_nvs_plat_read </td>
          <td>(</td>
          <td class="paramtype">uintptr_t</td>          <td class="paramname"><span class="paramname"><em>p_nvs_handle</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char const *</td>          <td class="paramname"><span class="paramname"><em>key</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *</td>          <td class="paramname"><span class="paramname"><em>p_data</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t</td>          <td class="paramname"><span class="paramname"><em>len</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read blob value for given key from non-volatile storage. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p_nvs_handle</td><td>Handle obtained with meshx_nvs_plat_open. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">key</td><td>Key name. Maximum length is (NVS_KEY_NAME_MAX_SIZE-1) characters. Shouldn't be empty. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">p_data</td><td>Pointer to the output variable populated with the read blob value. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>Length of the read blob value.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>MESHX_SUCCESS if the blob value was read successfully</li>
<li>MESHX_ERR_PLAT if there is an internal error; </li>
</ul>
</dd></dl>
<div class="fragment"><div class="line"><span class="lineno">   93</span>{</div>
<div class="line"><span class="lineno">   94</span>    esp_err_t err = ESP_OK;</div>
<div class="line"><span class="lineno">   95</span> </div>
<div class="line"><span class="lineno">   96</span>    <span class="keywordflow">if</span> (key == NULL || p_data == NULL || len == 0)</div>
<div class="line"><span class="lineno">   97</span>    {</div>
<div class="line"><span class="lineno">   98</span>        <a class="code hl_define" href="../../d7/dcb/meshx__log_8h.html#a56673888067cbe14c7a33b0856f46eb8">MESHX_LOGE</a>(<a class="code hl_enumvalue" href="../../d3/da1/module__id_8h.html#ac6141ce7b2d1d07b28553017c6a3aedca294f5c4e583ed87401713ad84945e322">MODULE_ID_COMMON</a>, <span class="stringliteral">&quot;Invalid argument&quot;</span>);</div>
<div class="line"><span class="lineno">   99</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../da/d68/meshx__err_8h.html#a6f984f69fa8d0240992b3a1e78bd42f6a0fbbd53c07d6e68fb5bca0ac8a532c7e">MESHX_INVALID_ARG</a>;</div>
<div class="line"><span class="lineno">  100</span>    }</div>
<div class="line"><span class="lineno">  101</span> </div>
<div class="line"><span class="lineno">  102</span>    <span class="keywordtype">size_t</span> read_len = len;</div>
<div class="line"><span class="lineno">  103</span>    err = nvs_get_blob((nvs_handle_t)p_nvs_handle, key, p_data, &amp;read_len);</div>
<div class="line"><span class="lineno">  104</span> </div>
<div class="line"><span class="lineno">  105</span>    <span class="keywordflow">if</span> (err != ESP_OK)</div>
<div class="line"><span class="lineno">  106</span>    {</div>
<div class="line"><span class="lineno">  107</span>        <a class="code hl_define" href="../../d7/dcb/meshx__log_8h.html#a56673888067cbe14c7a33b0856f46eb8">MESHX_LOGE</a>(<a class="code hl_enumvalue" href="../../d3/da1/module__id_8h.html#ac6141ce7b2d1d07b28553017c6a3aedca294f5c4e583ed87401713ad84945e322">MODULE_ID_COMMON</a>, <span class="stringliteral">&quot;nvs_get_blob failed&quot;</span>);</div>
<div class="line"><span class="lineno">  108</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../da/d68/meshx__err_8h.html#a6f984f69fa8d0240992b3a1e78bd42f6a6c085ef760a07c6f5b9422e1590fde8d">MESHX_ERR_PLAT</a>;</div>
<div class="line"><span class="lineno">  109</span>    }</div>
<div class="line"><span class="lineno">  110</span> </div>
<div class="line"><span class="lineno">  111</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../da/d68/meshx__err_8h.html#a6f984f69fa8d0240992b3a1e78bd42f6a0bcfcbc6db2a31dd3b3c3a91d999841b">MESHX_SUCCESS</a>;</div>
<div class="line"><span class="lineno">  112</span>}</div>
<div class="ttc" id="ameshx__err_8h_html_a6f984f69fa8d0240992b3a1e78bd42f6a0fbbd53c07d6e68fb5bca0ac8a532c7e"><div class="ttname"><a href="../../da/d68/meshx__err_8h.html#a6f984f69fa8d0240992b3a1e78bd42f6a0fbbd53c07d6e68fb5bca0ac8a532c7e">MESHX_INVALID_ARG</a></div><div class="ttdeci">@ MESHX_INVALID_ARG</div><div class="ttdef"><b>Definition</b> meshx_err.h:42</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac4731c0a5821db05dfc78f395caf73dd" name="ac4731c0a5821db05dfc78f395caf73dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac4731c0a5821db05dfc78f395caf73dd">&#9670;&#160;</a></span>meshx_nvs_plat_remove()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../da/d68/meshx__err_8h.html#a6f984f69fa8d0240992b3a1e78bd42f6">meshx_err_t</a> meshx_nvs_plat_remove </td>
          <td>(</td>
          <td class="paramtype">uintptr_t</td>          <td class="paramname"><span class="paramname"><em>p_nvs_handle</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char const *</td>          <td class="paramname"><span class="paramname"><em>key</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Remove a key-value pair from the non-volatile storage with a given key and namespace. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p_nvs_handle</td><td>Pointer to the opened handle. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">key</td><td>Key name. Maximum length is (NVS_KEY_NAME_MAX_SIZE-1) characters. Shouldn't be empty.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>MESHX_SUCCESS if the key-value pair was removed successfully</li>
<li>MESHX_ERR_PLAT for any platform error </li>
</ul>
</dd></dl>
<div class="fragment"><div class="line"><span class="lineno">  182</span>{</div>
<div class="line"><span class="lineno">  183</span>    esp_err_t err = ESP_OK;</div>
<div class="line"><span class="lineno">  184</span> </div>
<div class="line"><span class="lineno">  185</span>    err = nvs_erase_key((nvs_handle_t)p_nvs_handle, key);</div>
<div class="line"><span class="lineno">  186</span> </div>
<div class="line"><span class="lineno">  187</span>    <span class="keywordflow">if</span> (err != ESP_OK)</div>
<div class="line"><span class="lineno">  188</span>    {</div>
<div class="line"><span class="lineno">  189</span>        <a class="code hl_define" href="../../d7/dcb/meshx__log_8h.html#a56673888067cbe14c7a33b0856f46eb8">MESHX_LOGE</a>(<a class="code hl_enumvalue" href="../../d3/da1/module__id_8h.html#ac6141ce7b2d1d07b28553017c6a3aedca294f5c4e583ed87401713ad84945e322">MODULE_ID_COMMON</a>, <span class="stringliteral">&quot;nvs_erase_key failed&quot;</span>);</div>
<div class="line"><span class="lineno">  190</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../da/d68/meshx__err_8h.html#a6f984f69fa8d0240992b3a1e78bd42f6a6c085ef760a07c6f5b9422e1590fde8d">MESHX_ERR_PLAT</a>;</div>
<div class="line"><span class="lineno">  191</span>    }</div>
<div class="line"><span class="lineno">  192</span> </div>
<div class="line"><span class="lineno">  193</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../da/d68/meshx__err_8h.html#a6f984f69fa8d0240992b3a1e78bd42f6a0bcfcbc6db2a31dd3b3c3a91d999841b">MESHX_SUCCESS</a>;</div>
<div class="line"><span class="lineno">  194</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a486367a843345efbb5edb7267a706eb3" name="a486367a843345efbb5edb7267a706eb3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a486367a843345efbb5edb7267a706eb3">&#9670;&#160;</a></span>meshx_nvs_plat_write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../da/d68/meshx__err_8h.html#a6f984f69fa8d0240992b3a1e78bd42f6">meshx_err_t</a> meshx_nvs_plat_write </td>
          <td>(</td>
          <td class="paramtype">uintptr_t</td>          <td class="paramname"><span class="paramname"><em>p_nvs_handle</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char const *</td>          <td class="paramname"><span class="paramname"><em>key</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t const *</td>          <td class="paramname"><span class="paramname"><em>p_data</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t</td>          <td class="paramname"><span class="paramname"><em>len</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write a blob value to the non-volatile storage with a given key and namespace. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p_nvs_handle</td><td>Pointer to the opened handle. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">key</td><td>Key name. Maximum length is (NVS_KEY_NAME_MAX_SIZE-1) characters. Shouldn't be empty. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">p_data</td><td>Pointer to the data to write. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>Number of bytes to write.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>MESHX_SUCCESS if the value was written successfully</li>
<li>MESHX_ERR_PLAT for any platform error </li>
</ul>
</dd></dl>
<div class="fragment"><div class="line"><span class="lineno">  127</span>{</div>
<div class="line"><span class="lineno">  128</span>    <span class="keywordflow">if</span> (key == NULL || p_data == NULL || len == 0)</div>
<div class="line"><span class="lineno">  129</span>    {</div>
<div class="line"><span class="lineno">  130</span>        <a class="code hl_define" href="../../d7/dcb/meshx__log_8h.html#a56673888067cbe14c7a33b0856f46eb8">MESHX_LOGE</a>(<a class="code hl_enumvalue" href="../../d3/da1/module__id_8h.html#ac6141ce7b2d1d07b28553017c6a3aedca294f5c4e583ed87401713ad84945e322">MODULE_ID_COMMON</a>, <span class="stringliteral">&quot;Invalid argument&quot;</span>);</div>
<div class="line"><span class="lineno">  131</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../da/d68/meshx__err_8h.html#a6f984f69fa8d0240992b3a1e78bd42f6a0fbbd53c07d6e68fb5bca0ac8a532c7e">MESHX_INVALID_ARG</a>;</div>
<div class="line"><span class="lineno">  132</span>    }</div>
<div class="line"><span class="lineno">  133</span> </div>
<div class="line"><span class="lineno">  134</span>    esp_err_t err = ESP_OK;</div>
<div class="line"><span class="lineno">  135</span> </div>
<div class="line"><span class="lineno">  136</span>    err = nvs_set_blob((nvs_handle_t)p_nvs_handle, key, p_data, len);</div>
<div class="line"><span class="lineno">  137</span> </div>
<div class="line"><span class="lineno">  138</span>    <span class="keywordflow">if</span> (err != ESP_OK)</div>
<div class="line"><span class="lineno">  139</span>    {</div>
<div class="line"><span class="lineno">  140</span>        <a class="code hl_define" href="../../d7/dcb/meshx__log_8h.html#a56673888067cbe14c7a33b0856f46eb8">MESHX_LOGE</a>(<a class="code hl_enumvalue" href="../../d3/da1/module__id_8h.html#ac6141ce7b2d1d07b28553017c6a3aedca294f5c4e583ed87401713ad84945e322">MODULE_ID_COMMON</a>, <span class="stringliteral">&quot;nvs_set_blob failed&quot;</span>);</div>
<div class="line"><span class="lineno">  141</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../da/d68/meshx__err_8h.html#a6f984f69fa8d0240992b3a1e78bd42f6a6c085ef760a07c6f5b9422e1590fde8d">MESHX_ERR_PLAT</a>;</div>
<div class="line"><span class="lineno">  142</span>    }</div>
<div class="line"><span class="lineno">  143</span> </div>
<div class="line"><span class="lineno">  144</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../da/d68/meshx__err_8h.html#a6f984f69fa8d0240992b3a1e78bd42f6a0bcfcbc6db2a31dd3b3c3a91d999841b">MESHX_SUCCESS</a>;</div>
<div class="line"><span class="lineno">  145</span>}</div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Oct 28 2025 19:17:05 for MeshX by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2
</small></address>
</div><!-- doc-content -->
</body>
</html>
