<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MeshX: meshx_light_ctl_srv.h File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">MeshX<span id="projectnumber">&#160;0.4</span>
   </div>
   <div id="projectbrief">This repository provides an implementation for Bluetooth Low Energy (BLE) Mesh network nodes. The project allows you to create BLE mesh nodes that can communicate with each other, enabling the development of smart home solutions or other IoT-based applications.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_5c982d53a68cdbcd421152b4020263a9.html">main</a></li><li class="navelem"><a class="el" href="../../dir_8c5515a604d4a2bb78291420d5b72747.html">component</a></li><li class="navelem"><a class="el" href="../../dir_17e62e33567b93c5a1475a84b6c9c934.html">meshx</a></li><li class="navelem"><a class="el" href="../../dir_731868db0f8d6d1cac5b0ffc22af1dd4.html">elements</a></li><li class="navelem"><a class="el" href="../../dir_e75a121ce4fbf4ac625776640133c289.html">server</a></li><li class="navelem"><a class="el" href="../../dir_de06a67f94a28ad18faee55f202b3120.html">models</a></li><li class="navelem"><a class="el" href="../../dir_669592cf7fa1893fca894cfefda031ba.html">inc</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">meshx_light_ctl_srv.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Header file for the Light CTL Server module.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="../../d2/de3/meshx__common_8h_source.html">meshx_common.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dc/daf/meshx__light__server_8h_source.html">meshx_light_server.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../da/db3/meshx__control__task_8h_source.html">meshx_control_task.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d6/d1d/meshx__ble__mesh__cmn_8h_source.html">interface/ble_mesh/meshx_ble_mesh_cmn.h</a>&quot;</code><br />
</div>
<p><a href="../../db/dde/meshx__light__ctl__srv_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ae6c7ab6d2bce16f5c802c863bcf3b70a" id="r_ae6c7ab6d2bce16f5c802c863bcf3b70a"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="../../d2/de3/meshx__common_8h.html#ac8e45ab8a90ec79235f3db0423e164f3">meshx_model_interface_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae6c7ab6d2bce16f5c802c863bcf3b70a">meshx_ctl_setup_server_model_t</a></td></tr>
<tr class="memdesc:ae6c7ab6d2bce16f5c802c863bcf3b70a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Structure representing the MeshX CTL (Color Temperature Lightness) Setup Server Model.  <br /></td></tr>
<tr class="separator:ae6c7ab6d2bce16f5c802c863bcf3b70a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ba6098c98f00634f675fa2f2d7fb625" id="r_a8ba6098c98f00634f675fa2f2d7fb625"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="../../d2/de3/meshx__common_8h.html#ac8e45ab8a90ec79235f3db0423e164f3">meshx_model_interface_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8ba6098c98f00634f675fa2f2d7fb625">meshx_ctl_server_model_t</a></td></tr>
<tr class="memdesc:a8ba6098c98f00634f675fa2f2d7fb625"><td class="mdescLeft">&#160;</td><td class="mdescRight">Structure representing the MeshX CTL (Color Temperature Lightness) server model.  <br /></td></tr>
<tr class="separator:a8ba6098c98f00634f675fa2f2d7fb625"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a61a46f68788b46871dc34d09289e8530" id="r_a61a46f68788b46871dc34d09289e8530"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../da/d68/meshx__err_8h.html#a6f984f69fa8d0240992b3a1e78bd42f6">meshx_err_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a61a46f68788b46871dc34d09289e8530">meshx_light_ctl_server_create</a> (<a class="el" href="#a8ba6098c98f00634f675fa2f2d7fb625">meshx_ctl_server_model_t</a> **p_model, <a class="el" href="../../d4/de0/meshx__ble__mesh__cmn__def_8h.html#a3bae9ce6d9b944b93bb8a0b64e758d19">meshx_ptr_t</a> p_sig_model)</td></tr>
<tr class="memdesc:a61a46f68788b46871dc34d09289e8530"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create and initialize a new CTL server model instance.  <br /></td></tr>
<tr class="separator:a61a46f68788b46871dc34d09289e8530"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed19d572f2a8028c955328e452df507e" id="r_aed19d572f2a8028c955328e452df507e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../da/d68/meshx__err_8h.html#a6f984f69fa8d0240992b3a1e78bd42f6">meshx_err_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aed19d572f2a8028c955328e452df507e">meshx_light_ctl_server_delete</a> (<a class="el" href="#a8ba6098c98f00634f675fa2f2d7fb625">meshx_ctl_server_model_t</a> **p_model)</td></tr>
<tr class="memdesc:aed19d572f2a8028c955328e452df507e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete the CTL server model instance.  <br /></td></tr>
<tr class="separator:aed19d572f2a8028c955328e452df507e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8695297933d548b07c6b2ccce8236920" id="r_a8695297933d548b07c6b2ccce8236920"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../da/d68/meshx__err_8h.html#a6f984f69fa8d0240992b3a1e78bd42f6">meshx_err_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8695297933d548b07c6b2ccce8236920">meshx_light_ctl_srv_state_restore</a> (<a class="el" href="#a8ba6098c98f00634f675fa2f2d7fb625">meshx_ctl_server_model_t</a> *p_model, <a class="el" href="../../d7/de0/meshx__ble__mesh__light__srv_8h.html#a1d9a4faf50d1bf5ec8b4b042fdbc66be">meshx_light_ctl_srv_state_t</a> ctl_state)</td></tr>
<tr class="memdesc:a8695297933d548b07c6b2ccce8236920"><td class="mdescLeft">&#160;</td><td class="mdescRight">Restore the CTL state for the generic server model.  <br /></td></tr>
<tr class="separator:a8695297933d548b07c6b2ccce8236920"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc1d0d7fc5b8e44bebce9c905547780f" id="r_adc1d0d7fc5b8e44bebce9c905547780f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../da/d68/meshx__err_8h.html#a6f984f69fa8d0240992b3a1e78bd42f6">meshx_err_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#adc1d0d7fc5b8e44bebce9c905547780f">meshx_light_ctl_server_init</a> (void)</td></tr>
<tr class="memdesc:adc1d0d7fc5b8e44bebce9c905547780f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the CTL server model.  <br /></td></tr>
<tr class="separator:adc1d0d7fc5b8e44bebce9c905547780f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d34b245947a247d2d779fb364c38bc3" id="r_a7d34b245947a247d2d779fb364c38bc3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../da/d68/meshx__err_8h.html#a6f984f69fa8d0240992b3a1e78bd42f6">meshx_err_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7d34b245947a247d2d779fb364c38bc3">meshx_get_ctl_setup_srv_model</a> (<a class="el" href="../../d4/de0/meshx__ble__mesh__cmn__def_8h.html#a3bae9ce6d9b944b93bb8a0b64e758d19">meshx_ptr_t</a> p_model)</td></tr>
<tr class="memdesc:a7d34b245947a247d2d779fb364c38bc3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves the CTL (Color Temperature Lightness) Setup Server model instance.  <br /></td></tr>
<tr class="separator:a7d34b245947a247d2d779fb364c38bc3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a934b83618b10c26bf4d3f17e0ae1aa08" id="r_a934b83618b10c26bf4d3f17e0ae1aa08"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../da/d68/meshx__err_8h.html#a6f984f69fa8d0240992b3a1e78bd42f6">meshx_err_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a934b83618b10c26bf4d3f17e0ae1aa08">meshx_light_ctl_srv_status_send</a> (<a class="el" href="../../d6/d1d/meshx__ble__mesh__cmn_8h.html#ae2bb37b6b888ca21c50c93294c099237">meshx_model_t</a> *p_model, <a class="el" href="../../d6/d1d/meshx__ble__mesh__cmn_8h.html#af9f2a99e7f5887b417d5425a4ba5e664">meshx_ctx_t</a> *ctx, int16_t delta_uv, uint16_t lightness, uint16_t temperature)</td></tr>
<tr class="memdesc:a934b83618b10c26bf4d3f17e0ae1aa08"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send the Light CTL status message.  <br /></td></tr>
<tr class="separator:a934b83618b10c26bf4d3f17e0ae1aa08"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaff04640563eef2cfa526fbf99ed5319" id="r_aaff04640563eef2cfa526fbf99ed5319"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../da/d68/meshx__err_8h.html#a6f984f69fa8d0240992b3a1e78bd42f6">meshx_err_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aaff04640563eef2cfa526fbf99ed5319">meshx_light_ctl_srv_send_pack_create</a> (<a class="el" href="../../d4/de0/meshx__ble__mesh__cmn__def_8h.html#a3bae9ce6d9b944b93bb8a0b64e758d19">meshx_ptr_t</a> p_model, uint16_t element_id, uint16_t net_idx, uint16_t app_idx, uint16_t pub_addr, <a class="el" href="../../d7/de0/meshx__ble__mesh__light__srv_8h.html#a1d9a4faf50d1bf5ec8b4b042fdbc66be">meshx_light_ctl_srv_state_t</a> ctl_state, <a class="el" href="../../d7/de0/meshx__ble__mesh__light__srv_8h.html#ab7d1e0ab27057d7d631cbe509570476d">meshx_lighting_server_cb_param_t</a> *light_srv_send)</td></tr>
<tr class="memdesc:aaff04640563eef2cfa526fbf99ed5319"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a Light CTL Server send message packet.  <br /></td></tr>
<tr class="separator:aaff04640563eef2cfa526fbf99ed5319"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Header file for the Light CTL Server module. </p>
<p>Copyright Â© 2024 - 2025 MeshX</p>
<p>This file contains the function declarations and necessary includes for initializing and managing the Light CTL Server in the BLE mesh network.</p>
<dl class="section author"><dt>Author</dt><dd>Pranjal Chanda </dd></dl>
</div><h2 class="groupheader">Typedef Documentation</h2>
<a id="a8ba6098c98f00634f675fa2f2d7fb625" name="a8ba6098c98f00634f675fa2f2d7fb625"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ba6098c98f00634f675fa2f2d7fb625">&#9670;&#160;</a></span>meshx_ctl_server_model_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="../../d2/de3/meshx__common_8h.html#ac8e45ab8a90ec79235f3db0423e164f3">meshx_model_interface_t</a> <a class="el" href="#a8ba6098c98f00634f675fa2f2d7fb625">meshx_ctl_server_model_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Structure representing the MeshX CTL (Color Temperature Lightness) server model. </p>
<p>This structure encapsulates pointers to the CTL server SIG model, publication structures, and generic server structures used in the MeshX lighting control server implementation. </p>

</div>
</div>
<a id="ae6c7ab6d2bce16f5c802c863bcf3b70a" name="ae6c7ab6d2bce16f5c802c863bcf3b70a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae6c7ab6d2bce16f5c802c863bcf3b70a">&#9670;&#160;</a></span>meshx_ctl_setup_server_model_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="../../d2/de3/meshx__common_8h.html#ac8e45ab8a90ec79235f3db0423e164f3">meshx_model_interface_t</a> <a class="el" href="#ae6c7ab6d2bce16f5c802c863bcf3b70a">meshx_ctl_setup_server_model_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Structure representing the MeshX CTL (Color Temperature Lightness) Setup Server Model. </p>
<p>This structure encapsulates pointers to the SIG model, publication structures, and generic server structures required for the CTL setup server functionality. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a7d34b245947a247d2d779fb364c38bc3" name="a7d34b245947a247d2d779fb364c38bc3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d34b245947a247d2d779fb364c38bc3">&#9670;&#160;</a></span>meshx_get_ctl_setup_srv_model()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../da/d68/meshx__err_8h.html#a6f984f69fa8d0240992b3a1e78bd42f6">meshx_err_t</a> meshx_get_ctl_setup_srv_model </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/de0/meshx__ble__mesh__cmn__def_8h.html#a3bae9ce6d9b944b93bb8a0b64e758d19">meshx_ptr_t</a></td>          <td class="paramname"><span class="paramname"><em>p_model</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieves the CTL (Color Temperature Lightness) Setup Server model instance. </p>
<p>This function is used to obtain a reference or handle to the CTL Setup Server model, which is responsible for managing color temperature and lightness control in a mesh network.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p_model</td><td>Pointer to the model structure or context.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="../../da/d68/meshx__err_8h.html#a6f984f69fa8d0240992b3a1e78bd42f6" title="MeshX Error Codes.">meshx_err_t</a> Returns an error code indicating the result of the operation. Typically, MESHX_OK on success or an appropriate error code on failure. </dd></dl>
<div class="fragment"><div class="line"><span class="lineno">  290</span>{</div>
<div class="line"><span class="lineno">  291</span>    <span class="keywordflow">if</span> (!p_model)</div>
<div class="line"><span class="lineno">  292</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../da/d68/meshx__err_8h.html#a6f984f69fa8d0240992b3a1e78bd42f6a0fbbd53c07d6e68fb5bca0ac8a532c7e">MESHX_INVALID_ARG</a>;</div>
<div class="line"><span class="lineno">  293</span> </div>
<div class="line"><span class="lineno">  294</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d4/db6/meshx__light__ctl__srv_8c.html#ad7b3965ec05b69bf693150a97200e279">g_meshx_light_ctl_srv</a>.ctl_setup_server.meshx_srv_model == NULL)</div>
<div class="line"><span class="lineno">  295</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../da/d68/meshx__err_8h.html#a6f984f69fa8d0240992b3a1e78bd42f6a4d423ab700ffdf5440a1f0579beba8af">MESHX_FAIL</a>;</div>
<div class="line"><span class="lineno">  296</span> </div>
<div class="line"><span class="lineno">  297</span>    memcpy(p_model, &amp;<a class="code hl_variable" href="../../d4/db6/meshx__light__ctl__srv_8c.html#ad7b3965ec05b69bf693150a97200e279">g_meshx_light_ctl_srv</a>.ctl_setup_server.ctl_setup_srv_model, <span class="keyword">sizeof</span>(<a class="code hl_define" href="../../d3/d2b/meshx__platform__ble__mesh_8h.html#ab8c86cf2f5e47acb374476edda8b5b7c">MESHX_MODEL</a>));</div>
<div class="line"><span class="lineno">  298</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../da/d68/meshx__err_8h.html#a6f984f69fa8d0240992b3a1e78bd42f6a0bcfcbc6db2a31dd3b3c3a91d999841b">MESHX_SUCCESS</a>;</div>
<div class="line"><span class="lineno">  299</span>}</div>
<div class="ttc" id="ameshx__err_8h_html_a6f984f69fa8d0240992b3a1e78bd42f6a0bcfcbc6db2a31dd3b3c3a91d999841b"><div class="ttname"><a href="../../da/d68/meshx__err_8h.html#a6f984f69fa8d0240992b3a1e78bd42f6a0bcfcbc6db2a31dd3b3c3a91d999841b">MESHX_SUCCESS</a></div><div class="ttdeci">@ MESHX_SUCCESS</div><div class="ttdef"><b>Definition</b> meshx_err.h:40</div></div>
<div class="ttc" id="ameshx__err_8h_html_a6f984f69fa8d0240992b3a1e78bd42f6a0fbbd53c07d6e68fb5bca0ac8a532c7e"><div class="ttname"><a href="../../da/d68/meshx__err_8h.html#a6f984f69fa8d0240992b3a1e78bd42f6a0fbbd53c07d6e68fb5bca0ac8a532c7e">MESHX_INVALID_ARG</a></div><div class="ttdeci">@ MESHX_INVALID_ARG</div><div class="ttdef"><b>Definition</b> meshx_err.h:42</div></div>
<div class="ttc" id="ameshx__err_8h_html_a6f984f69fa8d0240992b3a1e78bd42f6a4d423ab700ffdf5440a1f0579beba8af"><div class="ttname"><a href="../../da/d68/meshx__err_8h.html#a6f984f69fa8d0240992b3a1e78bd42f6a4d423ab700ffdf5440a1f0579beba8af">MESHX_FAIL</a></div><div class="ttdeci">@ MESHX_FAIL</div><div class="ttdef"><b>Definition</b> meshx_err.h:41</div></div>
<div class="ttc" id="ameshx__light__ctl__srv_8c_html_ad7b3965ec05b69bf693150a97200e279"><div class="ttname"><a href="../../d4/db6/meshx__light__ctl__srv_8c.html#ad7b3965ec05b69bf693150a97200e279">g_meshx_light_ctl_srv</a></div><div class="ttdeci">static struct @162134341120176320346270047367114065256252040066 g_meshx_light_ctl_srv</div><div class="ttdoc">Structure to maintain the initialization and creation state of the MeshX Light CTL Server.</div></div>
<div class="ttc" id="ameshx__platform__ble__mesh_8h_html_ab8c86cf2f5e47acb374476edda8b5b7c"><div class="ttname"><a href="../../d3/d2b/meshx__platform__ble__mesh_8h.html#ab8c86cf2f5e47acb374476edda8b5b7c">MESHX_MODEL</a></div><div class="ttdeci">#define MESHX_MODEL</div><div class="ttdef"><b>Definition</b> meshx_platform_ble_mesh.h:34</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a61a46f68788b46871dc34d09289e8530" name="a61a46f68788b46871dc34d09289e8530"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a61a46f68788b46871dc34d09289e8530">&#9670;&#160;</a></span>meshx_light_ctl_server_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../da/d68/meshx__err_8h.html#a6f984f69fa8d0240992b3a1e78bd42f6">meshx_err_t</a> meshx_light_ctl_server_create </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="#a8ba6098c98f00634f675fa2f2d7fb625">meshx_ctl_server_model_t</a> **</td>          <td class="paramname"><span class="paramname"><em>p_model</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/de0/meshx__ble__mesh__cmn__def_8h.html#a3bae9ce6d9b944b93bb8a0b64e758d19">meshx_ptr_t</a></td>          <td class="paramname"><span class="paramname"><em>p_sig_model</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create and initialize a new CTL server model instance. </p>
<p>This function allocates memory for a new CTL server model and initializes it using the platform-specific creation function. It ensures that the model is properly set up for handling Generic OnOff messages in a BLE Mesh network.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">p_model</td><td>Pointer to a pointer where the newly created CTL server model instance will be stored. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">p_sig_model</td><td>Pointer to a pointer where the offset of the model will be stored.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>MESHX_SUCCESS: Successfully created and initialized the model.</li>
<li>MESHX_INVALID_ARG: The provided pointer is NULL.</li>
<li>MESHX_NO_MEM: Memory allocation failed. </li>
</ul>
</dd></dl>
<div class="fragment"><div class="line"><span class="lineno">  358</span>{</div>
<div class="line"><span class="lineno">  359</span>    <a class="code hl_enumeration" href="../../da/d68/meshx__err_8h.html#a6f984f69fa8d0240992b3a1e78bd42f6">meshx_err_t</a> err = <a class="code hl_enumvalue" href="../../da/d68/meshx__err_8h.html#a6f984f69fa8d0240992b3a1e78bd42f6a0bcfcbc6db2a31dd3b3c3a91d999841b">MESHX_SUCCESS</a>;</div>
<div class="line"><span class="lineno">  360</span>    <span class="keywordflow">if</span> (!p_model || !p_sig_model)</div>
<div class="line"><span class="lineno">  361</span>    {</div>
<div class="line"><span class="lineno">  362</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../da/d68/meshx__err_8h.html#a6f984f69fa8d0240992b3a1e78bd42f6a0fbbd53c07d6e68fb5bca0ac8a532c7e">MESHX_INVALID_ARG</a>;</div>
<div class="line"><span class="lineno">  363</span>    }</div>
<div class="line"><span class="lineno">  364</span> </div>
<div class="line"><span class="lineno">  365</span>    *p_model = (<a class="code hl_typedef" href="#a8ba6098c98f00634f675fa2f2d7fb625">meshx_ctl_server_model_t</a> *)<a class="code hl_define" href="../../da/d68/meshx__err_8h.html#a1d35fd42fb3bbaaa86816df7b0263b50">MESHX_CALOC</a>(1, <span class="keyword">sizeof</span>(<a class="code hl_typedef" href="#a8ba6098c98f00634f675fa2f2d7fb625">meshx_ctl_server_model_t</a>));</div>
<div class="line"><span class="lineno">  366</span>    <span class="keywordflow">if</span> (!*p_model)</div>
<div class="line"><span class="lineno">  367</span>    {</div>
<div class="line"><span class="lineno">  368</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../da/d68/meshx__err_8h.html#a6f984f69fa8d0240992b3a1e78bd42f6ad805de8202860d5657dc396e4b00aefe">MESHX_NO_MEM</a>;</div>
<div class="line"><span class="lineno">  369</span>    }</div>
<div class="line"><span class="lineno">  370</span> </div>
<div class="line"><span class="lineno">  371</span>    err = <a class="code hl_function" href="../../d7/de0/meshx__ble__mesh__light__srv_8h.html#aa7384157587813da254014dfd8f13b17">meshx_plat_light_ctl_srv_create</a>(</div>
<div class="line"><span class="lineno">  372</span>        p_sig_model,</div>
<div class="line"><span class="lineno">  373</span>        &amp;((*p_model)-&gt;meshx_pub),</div>
<div class="line"><span class="lineno">  374</span>        &amp;((*p_model)-&gt;meshx_gen));</div>
<div class="line"><span class="lineno">  375</span>    <span class="keywordflow">if</span>(err != <a class="code hl_enumvalue" href="../../da/d68/meshx__err_8h.html#a6f984f69fa8d0240992b3a1e78bd42f6a0bcfcbc6db2a31dd3b3c3a91d999841b">MESHX_SUCCESS</a>)</div>
<div class="line"><span class="lineno">  376</span>    {</div>
<div class="line"><span class="lineno">  377</span>        <span class="comment">/* Tops down deinit for CTL server model */</span></div>
<div class="line"><span class="lineno">  378</span>        <a class="code hl_function" href="../../d4/db6/meshx__light__ctl__srv_8c.html#aed19d572f2a8028c955328e452df507e">meshx_light_ctl_server_delete</a>(p_model);</div>
<div class="line"><span class="lineno">  379</span>        <span class="keywordflow">return</span> err;</div>
<div class="line"><span class="lineno">  380</span>    }</div>
<div class="line"><span class="lineno">  381</span> </div>
<div class="line"><span class="lineno">  382</span>    <span class="keywordflow">if</span>(     <a class="code hl_variable" href="../../d4/db6/meshx__light__ctl__srv_8c.html#ad7b3965ec05b69bf693150a97200e279">g_meshx_light_ctl_srv</a>.ctl_lighting_server_created == 0</div>
<div class="line"><span class="lineno">  383</span>        &amp;&amp;  <a class="code hl_variable" href="../../d4/db6/meshx__light__ctl__srv_8c.html#ad7b3965ec05b69bf693150a97200e279">g_meshx_light_ctl_srv</a>.ctl_setup_server.ctl_setup_server_init == 0)</div>
<div class="line"><span class="lineno">  384</span>    {</div>
<div class="line"><span class="lineno">  385</span>        <a class="code hl_define" href="../../d7/dcb/meshx__log_8h.html#a47d4a699f2997a758e0eca271b66cb48">MESHX_LOGI</a>(<a class="code hl_enumvalue" href="../../d3/da1/module__id_8h.html#ac6141ce7b2d1d07b28553017c6a3aedcae99b3f7b220d81ae4efb1b11bc390689">MODULE_ID_MODEL_SERVER</a>, <span class="stringliteral">&quot;Creating CTL setup server model&quot;</span>);</div>
<div class="line"><span class="lineno">  386</span>        <span class="comment">/* Create CTL setup server */</span></div>
<div class="line"><span class="lineno">  387</span>        err = <a class="code hl_function" href="../../d4/db6/meshx__light__ctl__srv_8c.html#a9ccee3fc1fcc58cf55c17803cbee478f">meshx_light_ctl_setup_server_create</a>();</div>
<div class="line"><span class="lineno">  388</span>        <span class="keywordflow">if</span>(err != <a class="code hl_enumvalue" href="../../da/d68/meshx__err_8h.html#a6f984f69fa8d0240992b3a1e78bd42f6a0bcfcbc6db2a31dd3b3c3a91d999841b">MESHX_SUCCESS</a>)</div>
<div class="line"><span class="lineno">  389</span>        {</div>
<div class="line"><span class="lineno">  390</span>            <span class="comment">/* Tops down deinit for CTL server model */</span></div>
<div class="line"><span class="lineno">  391</span>            <a class="code hl_function" href="../../d4/db6/meshx__light__ctl__srv_8c.html#a86ae7afdb87899d6bd6a4b8900c7c844">meshx_light_ctl_setup_server_delete</a>();</div>
<div class="line"><span class="lineno">  392</span>            <span class="comment">/* The code execution below is only possible if this is the very first model being created */</span></div>
<div class="line"><span class="lineno">  393</span>            <a class="code hl_function" href="../../d4/db6/meshx__light__ctl__srv_8c.html#aed19d572f2a8028c955328e452df507e">meshx_light_ctl_server_delete</a>(p_model);</div>
<div class="line"><span class="lineno">  394</span>            <span class="keywordflow">return</span> err;</div>
<div class="line"><span class="lineno">  395</span>        }</div>
<div class="line"><span class="lineno">  396</span>        <a class="code hl_variable" href="../../d4/db6/meshx__light__ctl__srv_8c.html#ad7b3965ec05b69bf693150a97200e279">g_meshx_light_ctl_srv</a>.ctl_setup_server.ctl_setup_server_init = <a class="code hl_define" href="../../da/dcb/meshx__gen__server_8c.html#ad9e063fcc893a076ff956ac6020372ed">MESHX_SERVER_INIT_MAGIC_NO</a>;</div>
<div class="line"><span class="lineno">  397</span>    }</div>
<div class="line"><span class="lineno">  398</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  399</span>    {</div>
<div class="line"><span class="lineno">  400</span>        <a class="code hl_variable" href="../../d4/db6/meshx__light__ctl__srv_8c.html#ad7b3965ec05b69bf693150a97200e279">g_meshx_light_ctl_srv</a>.ctl_lighting_server_created++;</div>
<div class="line"><span class="lineno">  401</span>    }</div>
<div class="line"><span class="lineno">  402</span> </div>
<div class="line"><span class="lineno">  403</span>    (*p_model)-&gt;meshx_sig = p_sig_model;</div>
<div class="line"><span class="lineno">  404</span> </div>
<div class="line"><span class="lineno">  405</span>    <span class="keywordflow">return</span> err;</div>
<div class="line"><span class="lineno">  406</span>}</div>
<div class="ttc" id="ameshx__ble__mesh__light__srv_8h_html_aa7384157587813da254014dfd8f13b17"><div class="ttname"><a href="../../d7/de0/meshx__ble__mesh__light__srv_8h.html#aa7384157587813da254014dfd8f13b17">meshx_plat_light_ctl_srv_create</a></div><div class="ttdeci">meshx_err_t meshx_plat_light_ctl_srv_create(meshx_ptr_t p_model, meshx_ptr_t *p_pub, meshx_ptr_t *p_ctl_srv)</div><div class="ttdoc">Create a Light CTL Server instance.</div><div class="ttdef"><b>Definition</b> esp_light_srv_model.c:408</div></div>
<div class="ttc" id="ameshx__err_8h_html_a1d35fd42fb3bbaaa86816df7b0263b50"><div class="ttname"><a href="../../da/d68/meshx__err_8h.html#a1d35fd42fb3bbaaa86816df7b0263b50">MESHX_CALOC</a></div><div class="ttdeci">#define MESHX_CALOC</div><div class="ttdef"><b>Definition</b> meshx_err.h:28</div></div>
<div class="ttc" id="ameshx__err_8h_html_a6f984f69fa8d0240992b3a1e78bd42f6"><div class="ttname"><a href="../../da/d68/meshx__err_8h.html#a6f984f69fa8d0240992b3a1e78bd42f6">meshx_err_t</a></div><div class="ttdeci">meshx_err_t</div><div class="ttdoc">MeshX Error Codes.</div><div class="ttdef"><b>Definition</b> meshx_err.h:39</div></div>
<div class="ttc" id="ameshx__err_8h_html_a6f984f69fa8d0240992b3a1e78bd42f6ad805de8202860d5657dc396e4b00aefe"><div class="ttname"><a href="../../da/d68/meshx__err_8h.html#a6f984f69fa8d0240992b3a1e78bd42f6ad805de8202860d5657dc396e4b00aefe">MESHX_NO_MEM</a></div><div class="ttdeci">@ MESHX_NO_MEM</div><div class="ttdef"><b>Definition</b> meshx_err.h:44</div></div>
<div class="ttc" id="ameshx__gen__server_8c_html_ad9e063fcc893a076ff956ac6020372ed"><div class="ttname"><a href="../../da/dcb/meshx__gen__server_8c.html#ad9e063fcc893a076ff956ac6020372ed">MESHX_SERVER_INIT_MAGIC_NO</a></div><div class="ttdeci">#define MESHX_SERVER_INIT_MAGIC_NO</div><div class="ttdef"><b>Definition</b> meshx_gen_server.c:19</div></div>
<div class="ttc" id="ameshx__light__ctl__srv_8c_html_a86ae7afdb87899d6bd6a4b8900c7c844"><div class="ttname"><a href="../../d4/db6/meshx__light__ctl__srv_8c.html#a86ae7afdb87899d6bd6a4b8900c7c844">meshx_light_ctl_setup_server_delete</a></div><div class="ttdeci">static meshx_err_t meshx_light_ctl_setup_server_delete(void)</div><div class="ttdoc">Deletes or deinitializes the Light CTL (Color Temperature Lightness) Setup Server instance.</div><div class="ttdef"><b>Definition</b> meshx_light_ctl_srv.c:218</div></div>
<div class="ttc" id="ameshx__light__ctl__srv_8c_html_a9ccee3fc1fcc58cf55c17803cbee478f"><div class="ttname"><a href="../../d4/db6/meshx__light__ctl__srv_8c.html#a9ccee3fc1fcc58cf55c17803cbee478f">meshx_light_ctl_setup_server_create</a></div><div class="ttdeci">static meshx_err_t meshx_light_ctl_setup_server_create(void)</div><div class="ttdoc">Creates and initializes the Light CTL (Color Temperature Lightness) Setup Server.</div><div class="ttdef"><b>Definition</b> meshx_light_ctl_srv.c:246</div></div>
<div class="ttc" id="ameshx__light__ctl__srv_8c_html_aed19d572f2a8028c955328e452df507e"><div class="ttname"><a href="../../d4/db6/meshx__light__ctl__srv_8c.html#aed19d572f2a8028c955328e452df507e">meshx_light_ctl_server_delete</a></div><div class="ttdeci">meshx_err_t meshx_light_ctl_server_delete(meshx_ctl_server_model_t **p_model)</div><div class="ttdoc">Delete the CTL server model instance.</div><div class="ttdef"><b>Definition</b> meshx_light_ctl_srv.c:420</div></div>
<div class="ttc" id="ameshx__light__ctl__srv_8h_html_a8ba6098c98f00634f675fa2f2d7fb625"><div class="ttname"><a href="#a8ba6098c98f00634f675fa2f2d7fb625">meshx_ctl_server_model_t</a></div><div class="ttdeci">meshx_model_interface_t meshx_ctl_server_model_t</div><div class="ttdoc">Structure representing the MeshX CTL (Color Temperature Lightness) server model.</div><div class="ttdef"><b>Definition</b> meshx_light_ctl_srv.h:37</div></div>
<div class="ttc" id="ameshx__log_8h_html_a47d4a699f2997a758e0eca271b66cb48"><div class="ttname"><a href="../../d7/dcb/meshx__log_8h.html#a47d4a699f2997a758e0eca271b66cb48">MESHX_LOGI</a></div><div class="ttdeci">#define MESHX_LOGI(module_id, format,...)</div><div class="ttdef"><b>Definition</b> meshx_log.h:94</div></div>
<div class="ttc" id="amodule__id_8h_html_ac6141ce7b2d1d07b28553017c6a3aedcae99b3f7b220d81ae4efb1b11bc390689"><div class="ttname"><a href="../../d3/da1/module__id_8h.html#ac6141ce7b2d1d07b28553017c6a3aedcae99b3f7b220d81ae4efb1b11bc390689">MODULE_ID_MODEL_SERVER</a></div><div class="ttdeci">@ MODULE_ID_MODEL_SERVER</div><div class="ttdef"><b>Definition</b> module_id.h:30</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aed19d572f2a8028c955328e452df507e" name="aed19d572f2a8028c955328e452df507e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed19d572f2a8028c955328e452df507e">&#9670;&#160;</a></span>meshx_light_ctl_server_delete()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../da/d68/meshx__err_8h.html#a6f984f69fa8d0240992b3a1e78bd42f6">meshx_err_t</a> meshx_light_ctl_server_delete </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="#a8ba6098c98f00634f675fa2f2d7fb625">meshx_ctl_server_model_t</a> **</td>          <td class="paramname"><span class="paramname"><em>p_model</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delete the CTL server model instance. </p>
<p>This function deletes an instance of the CTL server model, freeing associated resources and setting the model pointer to NULL.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">p_model</td><td>Double pointer to the CTL server model instance to be deleted.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>MESHX_SUCCESS: Successfully deleted the model.</li>
<li>MESHX_INVALID_ARG: Invalid argument provided. </li>
</ul>
</dd></dl>
<div class="fragment"><div class="line"><span class="lineno">  421</span>{</div>
<div class="line"><span class="lineno">  422</span>    <span class="keywordflow">if</span> (p_model == NULL || *p_model == NULL)</div>
<div class="line"><span class="lineno">  423</span>    {</div>
<div class="line"><span class="lineno">  424</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../da/d68/meshx__err_8h.html#a6f984f69fa8d0240992b3a1e78bd42f6a0fbbd53c07d6e68fb5bca0ac8a532c7e">MESHX_INVALID_ARG</a>;</div>
<div class="line"><span class="lineno">  425</span>    }</div>
<div class="line"><span class="lineno">  426</span> </div>
<div class="line"><span class="lineno">  427</span>    <a class="code hl_function" href="../../d7/de0/meshx__ble__mesh__light__srv_8h.html#a0ee9a897168a69c9ede40278fdb4b445">meshx_plat_light_srv_delete</a>(</div>
<div class="line"><span class="lineno">  428</span>        &amp;((*p_model)-&gt;meshx_pub),</div>
<div class="line"><span class="lineno">  429</span>        &amp;((*p_model)-&gt;meshx_gen));</div>
<div class="line"><span class="lineno">  430</span> </div>
<div class="line"><span class="lineno">  431</span>    <a class="code hl_define" href="../../da/d68/meshx__err_8h.html#af8f58f6602b246397c882d9cddd9a334">MESHX_FREE</a>(*p_model);</div>
<div class="line"><span class="lineno">  432</span>    *p_model = NULL;</div>
<div class="line"><span class="lineno">  433</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d4/db6/meshx__light__ctl__srv_8c.html#ad7b3965ec05b69bf693150a97200e279">g_meshx_light_ctl_srv</a>.ctl_lighting_server_created == 0)</div>
<div class="line"><span class="lineno">  434</span>    {</div>
<div class="line"><span class="lineno">  435</span>        <a class="code hl_define" href="../../d7/dcb/meshx__log_8h.html#a3df9f46a0a08969094d8eef3581409e8">MESHX_LOGW</a>(<a class="code hl_enumvalue" href="../../d3/da1/module__id_8h.html#ac6141ce7b2d1d07b28553017c6a3aedcae99b3f7b220d81ae4efb1b11bc390689">MODULE_ID_MODEL_SERVER</a>, <span class="stringliteral">&quot;Deleting CTL setup server model&quot;</span>);</div>
<div class="line"><span class="lineno">  436</span>        <span class="comment">/* Delete CTL setup server */</span></div>
<div class="line"><span class="lineno">  437</span>    }</div>
<div class="line"><span class="lineno">  438</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  439</span>    {</div>
<div class="line"><span class="lineno">  440</span>        <a class="code hl_variable" href="../../d4/db6/meshx__light__ctl__srv_8c.html#ad7b3965ec05b69bf693150a97200e279">g_meshx_light_ctl_srv</a>.ctl_lighting_server_created--;</div>
<div class="line"><span class="lineno">  441</span>    }</div>
<div class="line"><span class="lineno">  442</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../da/d68/meshx__err_8h.html#a6f984f69fa8d0240992b3a1e78bd42f6a0bcfcbc6db2a31dd3b3c3a91d999841b">MESHX_SUCCESS</a>;</div>
<div class="line"><span class="lineno">  443</span>}</div>
<div class="ttc" id="ameshx__ble__mesh__light__srv_8h_html_a0ee9a897168a69c9ede40278fdb4b445"><div class="ttname"><a href="../../d7/de0/meshx__ble__mesh__light__srv_8h.html#a0ee9a897168a69c9ede40278fdb4b445">meshx_plat_light_srv_delete</a></div><div class="ttdeci">meshx_err_t meshx_plat_light_srv_delete(meshx_ptr_t *p_pub, meshx_ptr_t *p_ctl_srv)</div><div class="ttdoc">Delete a Light CTL Server instance.</div><div class="ttdef"><b>Definition</b> esp_light_srv_model.c:327</div></div>
<div class="ttc" id="ameshx__err_8h_html_af8f58f6602b246397c882d9cddd9a334"><div class="ttname"><a href="../../da/d68/meshx__err_8h.html#af8f58f6602b246397c882d9cddd9a334">MESHX_FREE</a></div><div class="ttdeci">#define MESHX_FREE</div><div class="ttdef"><b>Definition</b> meshx_err.h:32</div></div>
<div class="ttc" id="ameshx__log_8h_html_a3df9f46a0a08969094d8eef3581409e8"><div class="ttname"><a href="../../d7/dcb/meshx__log_8h.html#a3df9f46a0a08969094d8eef3581409e8">MESHX_LOGW</a></div><div class="ttdeci">#define MESHX_LOGW(module_id, format,...)</div><div class="ttdef"><b>Definition</b> meshx_log.h:81</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="adc1d0d7fc5b8e44bebce9c905547780f" name="adc1d0d7fc5b8e44bebce9c905547780f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc1d0d7fc5b8e44bebce9c905547780f">&#9670;&#160;</a></span>meshx_light_ctl_server_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../da/d68/meshx__err_8h.html#a6f984f69fa8d0240992b3a1e78bd42f6">meshx_err_t</a> meshx_light_ctl_server_init </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the CTL server model. </p>
<p>This function initializes the CTL server model for the BLE mesh node.</p>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>MESHX_SUCCESS: Success</li>
<li>MESHX_FAIL: Failure</li>
</ul>
</dd></dl>
<p>Initialize the CTL server model.</p>
<p>This function initializes the Light CTL (Color Temperature Light) Server model for the BLE Mesh Node. It sets up the necessary configurations and state for the Light CTL Server to operate correctly.</p>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>MESHX_SUCCESS: Success</li>
<li>MESHX_FAIL: Failure </li>
</ul>
</dd></dl>
<div class="fragment"><div class="line"><span class="lineno">  312</span>{</div>
<div class="line"><span class="lineno">  313</span>    <a class="code hl_enumeration" href="../../da/d68/meshx__err_8h.html#a6f984f69fa8d0240992b3a1e78bd42f6">meshx_err_t</a> err = <a class="code hl_enumvalue" href="../../da/d68/meshx__err_8h.html#a6f984f69fa8d0240992b3a1e78bd42f6a0bcfcbc6db2a31dd3b3c3a91d999841b">MESHX_SUCCESS</a>;</div>
<div class="line"><span class="lineno">  314</span> </div>
<div class="line"><span class="lineno">  315</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d4/db6/meshx__light__ctl__srv_8c.html#ad7b3965ec05b69bf693150a97200e279">g_meshx_light_ctl_srv</a>.ctl_setup_server.ctl_setup_server_init == <a class="code hl_define" href="../../da/dcb/meshx__gen__server_8c.html#ad9e063fcc893a076ff956ac6020372ed">MESHX_SERVER_INIT_MAGIC_NO</a>)</div>
<div class="line"><span class="lineno">  316</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../da/d68/meshx__err_8h.html#a6f984f69fa8d0240992b3a1e78bd42f6a0bcfcbc6db2a31dd3b3c3a91d999841b">MESHX_SUCCESS</a>;</div>
<div class="line"><span class="lineno">  317</span> </div>
<div class="line"><span class="lineno">  318</span>    <a class="code hl_variable" href="../../d4/db6/meshx__light__ctl__srv_8c.html#ad7b3965ec05b69bf693150a97200e279">g_meshx_light_ctl_srv</a>.ctl_setup_server.ctl_setup_server_init = <a class="code hl_define" href="../../da/dcb/meshx__gen__server_8c.html#ad9e063fcc893a076ff956ac6020372ed">MESHX_SERVER_INIT_MAGIC_NO</a>;</div>
<div class="line"><span class="lineno">  319</span> </div>
<div class="line"><span class="lineno">  320</span>    err = <a class="code hl_function" href="../../dc/daf/meshx__light__server_8h.html#a12af3296e750ff638ba757ebf12d9043">meshx_lighting_srv_init</a>();</div>
<div class="line"><span class="lineno">  321</span>    <span class="keywordflow">if</span> (err)</div>
<div class="line"><span class="lineno">  322</span>        <a class="code hl_define" href="../../d7/dcb/meshx__log_8h.html#a56673888067cbe14c7a33b0856f46eb8">MESHX_LOGE</a>(<a class="code hl_enumvalue" href="../../d3/da1/module__id_8h.html#ac6141ce7b2d1d07b28553017c6a3aedcae99b3f7b220d81ae4efb1b11bc390689">MODULE_ID_MODEL_SERVER</a>, <span class="stringliteral">&quot;Failed to initialize prod server&quot;</span>);</div>
<div class="line"><span class="lineno">  323</span> </div>
<div class="line"><span class="lineno">  324</span>    err = <a class="code hl_function" href="../../dc/daf/meshx__light__server_8h.html#ac2ffaf1fcb582f87cf5e5a9b36f2d043">meshx_lighting_reg_cb</a>(</div>
<div class="line"><span class="lineno">  325</span>        <a class="code hl_define" href="../../d4/de0/meshx__ble__mesh__cmn__def_8h.html#a7c86fb8431368de11d949af079f0edc4">MESHX_MODEL_ID_LIGHT_CTL_SRV</a>,</div>
<div class="line"><span class="lineno">  326</span>        (<a class="code hl_typedef" href="../../dc/daf/meshx__light__server_8h.html#ac16451a5084a43c20394d49ed6620a03">meshx_lighting_server_cb</a>)&amp;<a class="code hl_function" href="../../d4/db6/meshx__light__ctl__srv_8c.html#a7d11c7a15e9c2066afb3f22e72068518">meshx_handle_light_ctl_msg</a></div>
<div class="line"><span class="lineno">  327</span>    );</div>
<div class="line"><span class="lineno">  328</span>    <span class="keywordflow">if</span> (err)</div>
<div class="line"><span class="lineno">  329</span>        <a class="code hl_define" href="../../d7/dcb/meshx__log_8h.html#a56673888067cbe14c7a33b0856f46eb8">MESHX_LOGE</a>(<a class="code hl_enumvalue" href="../../d3/da1/module__id_8h.html#ac6141ce7b2d1d07b28553017c6a3aedcae99b3f7b220d81ae4efb1b11bc390689">MODULE_ID_MODEL_SERVER</a>, <span class="stringliteral">&quot;Failed to initialize meshx_gen_srv_reg_cb (Err: %d)&quot;</span>, err);</div>
<div class="line"><span class="lineno">  330</span> </div>
<div class="line"><span class="lineno">  331</span>    err = <a class="code hl_function" href="../../dc/daf/meshx__light__server_8h.html#ac2ffaf1fcb582f87cf5e5a9b36f2d043">meshx_lighting_reg_cb</a>(</div>
<div class="line"><span class="lineno">  332</span>        <a class="code hl_define" href="../../d4/de0/meshx__ble__mesh__cmn__def_8h.html#a5887d8ba40864cf6754204bd8d9d8a23">MESHX_MODEL_ID_LIGHT_CTL_SETUP_SRV</a>,</div>
<div class="line"><span class="lineno">  333</span>        (<a class="code hl_typedef" href="../../dc/daf/meshx__light__server_8h.html#ac16451a5084a43c20394d49ed6620a03">meshx_lighting_server_cb</a>)&amp;<a class="code hl_function" href="../../d4/db6/meshx__light__ctl__srv_8c.html#a7d11c7a15e9c2066afb3f22e72068518">meshx_handle_light_ctl_msg</a></div>
<div class="line"><span class="lineno">  334</span>    );</div>
<div class="line"><span class="lineno">  335</span>    <span class="keywordflow">if</span> (err)</div>
<div class="line"><span class="lineno">  336</span>        <a class="code hl_define" href="../../d7/dcb/meshx__log_8h.html#a56673888067cbe14c7a33b0856f46eb8">MESHX_LOGE</a>(<a class="code hl_enumvalue" href="../../d3/da1/module__id_8h.html#ac6141ce7b2d1d07b28553017c6a3aedcae99b3f7b220d81ae4efb1b11bc390689">MODULE_ID_MODEL_SERVER</a>, <span class="stringliteral">&quot;Failed to initialize meshx_gen_srv_reg_cb (Err: %d)&quot;</span>, err);</div>
<div class="line"><span class="lineno">  337</span> </div>
<div class="line"><span class="lineno">  338</span>    <span class="keywordflow">return</span> err;</div>
<div class="line"><span class="lineno">  339</span>}</div>
<div class="ttc" id="ameshx__ble__mesh__cmn__def_8h_html_a5887d8ba40864cf6754204bd8d9d8a23"><div class="ttname"><a href="../../d4/de0/meshx__ble__mesh__cmn__def_8h.html#a5887d8ba40864cf6754204bd8d9d8a23">MESHX_MODEL_ID_LIGHT_CTL_SETUP_SRV</a></div><div class="ttdeci">#define MESHX_MODEL_ID_LIGHT_CTL_SETUP_SRV</div><div class="ttdef"><b>Definition</b> meshx_ble_mesh_cmn_def.h:103</div></div>
<div class="ttc" id="ameshx__ble__mesh__cmn__def_8h_html_a7c86fb8431368de11d949af079f0edc4"><div class="ttname"><a href="../../d4/de0/meshx__ble__mesh__cmn__def_8h.html#a7c86fb8431368de11d949af079f0edc4">MESHX_MODEL_ID_LIGHT_CTL_SRV</a></div><div class="ttdeci">#define MESHX_MODEL_ID_LIGHT_CTL_SRV</div><div class="ttdef"><b>Definition</b> meshx_ble_mesh_cmn_def.h:102</div></div>
<div class="ttc" id="ameshx__light__ctl__srv_8c_html_a7d11c7a15e9c2066afb3f22e72068518"><div class="ttname"><a href="../../d4/db6/meshx__light__ctl__srv_8c.html#a7d11c7a15e9c2066afb3f22e72068518">meshx_handle_light_ctl_msg</a></div><div class="ttdeci">static meshx_err_t meshx_handle_light_ctl_msg(const dev_struct_t *pdev, const control_task_msg_evt_t evt, meshx_lighting_server_cb_param_t *param)</div><div class="ttdoc">Handle Light CTL messages for the lighting server model.</div><div class="ttdef"><b>Definition</b> meshx_light_ctl_srv.c:117</div></div>
<div class="ttc" id="ameshx__light__server_8h_html_a12af3296e750ff638ba757ebf12d9043"><div class="ttname"><a href="../../dc/daf/meshx__light__server_8h.html#a12af3296e750ff638ba757ebf12d9043">meshx_lighting_srv_init</a></div><div class="ttdeci">meshx_err_t meshx_lighting_srv_init(void)</div><div class="ttdoc">Initialize the production lighting server.</div><div class="ttdef"><b>Definition</b> meshx_light_server.c:123</div></div>
<div class="ttc" id="ameshx__light__server_8h_html_ac16451a5084a43c20394d49ed6620a03"><div class="ttname"><a href="../../dc/daf/meshx__light__server_8h.html#ac16451a5084a43c20394d49ed6620a03">meshx_lighting_server_cb</a></div><div class="ttdeci">control_task_msg_handle_t meshx_lighting_server_cb</div><div class="ttdef"><b>Definition</b> meshx_light_server.h:20</div></div>
<div class="ttc" id="ameshx__light__server_8h_html_ac2ffaf1fcb582f87cf5e5a9b36f2d043"><div class="ttname"><a href="../../dc/daf/meshx__light__server_8h.html#ac2ffaf1fcb582f87cf5e5a9b36f2d043">meshx_lighting_reg_cb</a></div><div class="ttdeci">meshx_err_t meshx_lighting_reg_cb(uint32_t model_id, meshx_lighting_server_cb cb)</div><div class="ttdoc">Register a callback function for the lighting server model.</div><div class="ttdef"><b>Definition</b> meshx_light_server.c:108</div></div>
<div class="ttc" id="ameshx__log_8h_html_a56673888067cbe14c7a33b0856f46eb8"><div class="ttname"><a href="../../d7/dcb/meshx__log_8h.html#a56673888067cbe14c7a33b0856f46eb8">MESHX_LOGE</a></div><div class="ttdeci">#define MESHX_LOGE(module_id, format,...)</div><div class="ttdef"><b>Definition</b> meshx_log.h:67</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aaff04640563eef2cfa526fbf99ed5319" name="aaff04640563eef2cfa526fbf99ed5319"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaff04640563eef2cfa526fbf99ed5319">&#9670;&#160;</a></span>meshx_light_ctl_srv_send_pack_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../da/d68/meshx__err_8h.html#a6f984f69fa8d0240992b3a1e78bd42f6">meshx_err_t</a> meshx_light_ctl_srv_send_pack_create </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/de0/meshx__ble__mesh__cmn__def_8h.html#a3bae9ce6d9b944b93bb8a0b64e758d19">meshx_ptr_t</a></td>          <td class="paramname"><span class="paramname"><em>p_model</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t</td>          <td class="paramname"><span class="paramname"><em>element_id</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t</td>          <td class="paramname"><span class="paramname"><em>net_idx</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t</td>          <td class="paramname"><span class="paramname"><em>app_idx</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t</td>          <td class="paramname"><span class="paramname"><em>pub_addr</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d7/de0/meshx__ble__mesh__light__srv_8h.html#a1d9a4faf50d1bf5ec8b4b042fdbc66be">meshx_light_ctl_srv_state_t</a></td>          <td class="paramname"><span class="paramname"><em>ctl_state</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d7/de0/meshx__ble__mesh__light__srv_8h.html#ab7d1e0ab27057d7d631cbe509570476d">meshx_lighting_server_cb_param_t</a> *</td>          <td class="paramname"><span class="paramname"><em>light_srv_send</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a Light CTL Server send message packet. </p>
<p>This function creates a Light CTL Server send message packet with the provided parameters.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p_model</td><td>Pointer to the MeshX model structure. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">element_id</td><td>Element ID associated with the model. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">net_idx</td><td>Network Index for the message. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">app_idx</td><td>Application Index for the message. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pub_addr</td><td>Publication address for the message. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ctl_state</td><td>Current state of the Light CTL Server. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">light_srv_send</td><td>Pointer to the structure where the created message packet will be stored.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>MESHX_SUCCESS: Successfully created the message packet.</li>
<li>MESHX_INVALID_ARG: Invalid argument provided. </li>
</ul>
</dd></dl>
<div class="fragment"><div class="line"><span class="lineno">  545</span>{</div>
<div class="line"><span class="lineno">  546</span>    <span class="keywordflow">if</span> (!p_model || !light_srv_send)</div>
<div class="line"><span class="lineno">  547</span>    {</div>
<div class="line"><span class="lineno">  548</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../da/d68/meshx__err_8h.html#a6f984f69fa8d0240992b3a1e78bd42f6a0fbbd53c07d6e68fb5bca0ac8a532c7e">MESHX_INVALID_ARG</a>;</div>
<div class="line"><span class="lineno">  549</span>    }</div>
<div class="line"><span class="lineno">  550</span> </div>
<div class="line"><span class="lineno">  551</span>    memset(light_srv_send, 0, <span class="keyword">sizeof</span>(<a class="code hl_typedef" href="../../d7/de0/meshx__ble__mesh__light__srv_8h.html#ab7d1e0ab27057d7d631cbe509570476d">meshx_lighting_server_cb_param_t</a>));</div>
<div class="line"><span class="lineno">  552</span>    light_srv_send-&gt;<a class="code hl_variable" href="../../dc/d6c/structmeshx__lighting__server__cb__param.html#a3c2a6672a3d343b1ecf7182c2a8c230b">ctx</a>.<a class="code hl_variable" href="../../db/d33/structmeshx__ctx.html#aae16e1fbd81f097bdac104ecc0e9991e">net_idx</a> = net_idx;</div>
<div class="line"><span class="lineno">  553</span>    light_srv_send-&gt;<a class="code hl_variable" href="../../dc/d6c/structmeshx__lighting__server__cb__param.html#a3c2a6672a3d343b1ecf7182c2a8c230b">ctx</a>.<a class="code hl_variable" href="../../db/d33/structmeshx__ctx.html#a619e41bfdbb6eb1145054fb6b853abda">app_idx</a> = app_idx;</div>
<div class="line"><span class="lineno">  554</span>    light_srv_send-&gt;<a class="code hl_variable" href="../../dc/d6c/structmeshx__lighting__server__cb__param.html#a3c2a6672a3d343b1ecf7182c2a8c230b">ctx</a>.<a class="code hl_variable" href="../../db/d33/structmeshx__ctx.html#adca87f7e6e22789f4eee48a4ca23dcac">src_addr</a> = element_id;</div>
<div class="line"><span class="lineno">  555</span>    light_srv_send-&gt;<a class="code hl_variable" href="../../dc/d6c/structmeshx__lighting__server__cb__param.html#a3c2a6672a3d343b1ecf7182c2a8c230b">ctx</a>.<a class="code hl_variable" href="../../db/d33/structmeshx__ctx.html#af8b310010317426cc7a107a510a5e4bd">dst_addr</a> = pub_addr;</div>
<div class="line"><span class="lineno">  556</span>    light_srv_send-&gt;<a class="code hl_variable" href="../../dc/d6c/structmeshx__lighting__server__cb__param.html#a3c2a6672a3d343b1ecf7182c2a8c230b">ctx</a>.<a class="code hl_variable" href="../../db/d33/structmeshx__ctx.html#a791eb2748742c87194f25ccd9f13aafb">opcode</a> = <a class="code hl_define" href="../../d4/de0/meshx__ble__mesh__cmn__def_8h.html#a344b0c68c38dc56d262ac5c21001a18c">MESHX_MODEL_OP_LIGHT_CTL_STATUS</a>;</div>
<div class="line"><span class="lineno">  557</span>    light_srv_send-&gt;<a class="code hl_variable" href="../../dc/d6c/structmeshx__lighting__server__cb__param.html#a3c2a6672a3d343b1ecf7182c2a8c230b">ctx</a>.<a class="code hl_variable" href="../../db/d33/structmeshx__ctx.html#a008b742864438d623de613909036f8a6">p_ctx</a> = NULL;</div>
<div class="line"><span class="lineno">  558</span> </div>
<div class="line"><span class="lineno">  559</span>    light_srv_send-&gt;<a class="code hl_variable" href="../../dc/d6c/structmeshx__lighting__server__cb__param.html#a73cda8c575b818b96c9b4ab30b55e2d5">model</a>.<a class="code hl_variable" href="../../d7/df1/structmeshx__model.html#aca9a32ca9d557de21436fa5019ab9f1b">el_id</a> = element_id;</div>
<div class="line"><span class="lineno">  560</span>    light_srv_send-&gt;<a class="code hl_variable" href="../../dc/d6c/structmeshx__lighting__server__cb__param.html#a73cda8c575b818b96c9b4ab30b55e2d5">model</a>.<a class="code hl_variable" href="../../d7/df1/structmeshx__model.html#a93aa811e6fc21f6848bacf62853edab7">p_model</a> = p_model;</div>
<div class="line"><span class="lineno">  561</span> </div>
<div class="line"><span class="lineno">  562</span>    light_srv_send-&gt;<a class="code hl_variable" href="../../dc/d6c/structmeshx__lighting__server__cb__param.html#aac263c598899aa419704c785b731b10f">state_change</a>.<a class="code hl_variable" href="../../d3/d74/unionmeshx__lighting__server__state__change__t.html#af27cfd5b9ee34d1685768eb1373cd7f4">ctl_set</a>.<a class="code hl_variable" href="../../dc/d08/structmeshx__state__change__light__ctl__set__t.html#a2249a9c3ce8727d7495b5f52749822ec">delta_uv</a> = ctl_state.<a class="code hl_variable" href="../../d5/d24/structmeshx__light__ctl__srv__state.html#a9a115fac8c507d2cb8f924523ff9528c">delta_uv</a>;</div>
<div class="line"><span class="lineno">  563</span>    light_srv_send-&gt;<a class="code hl_variable" href="../../dc/d6c/structmeshx__lighting__server__cb__param.html#aac263c598899aa419704c785b731b10f">state_change</a>.<a class="code hl_variable" href="../../d3/d74/unionmeshx__lighting__server__state__change__t.html#af27cfd5b9ee34d1685768eb1373cd7f4">ctl_set</a>.<a class="code hl_variable" href="../../dc/d08/structmeshx__state__change__light__ctl__set__t.html#ad478ecf14524d734de4b61d80c1acccf">lightness</a> = ctl_state.<a class="code hl_variable" href="../../d5/d24/structmeshx__light__ctl__srv__state.html#aa51508449e7a8a7129f90e5cf5f0bedd">lightness</a>;</div>
<div class="line"><span class="lineno">  564</span>    light_srv_send-&gt;<a class="code hl_variable" href="../../dc/d6c/structmeshx__lighting__server__cb__param.html#aac263c598899aa419704c785b731b10f">state_change</a>.<a class="code hl_variable" href="../../d3/d74/unionmeshx__lighting__server__state__change__t.html#af27cfd5b9ee34d1685768eb1373cd7f4">ctl_set</a>.<a class="code hl_variable" href="../../dc/d08/structmeshx__state__change__light__ctl__set__t.html#ac18bb67373d16a5629562a8bd5132c21">temperature</a> = ctl_state.<a class="code hl_variable" href="../../d5/d24/structmeshx__light__ctl__srv__state.html#af8bf9b31292db3e4ead7f2e768cf37bd">temperature</a>;</div>
<div class="line"><span class="lineno">  565</span> </div>
<div class="line"><span class="lineno">  566</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../da/d68/meshx__err_8h.html#a6f984f69fa8d0240992b3a1e78bd42f6a0bcfcbc6db2a31dd3b3c3a91d999841b">MESHX_SUCCESS</a>;</div>
<div class="line"><span class="lineno">  567</span>}</div>
<div class="ttc" id="ameshx__ble__mesh__cmn__def_8h_html_a344b0c68c38dc56d262ac5c21001a18c"><div class="ttname"><a href="../../d4/de0/meshx__ble__mesh__cmn__def_8h.html#a344b0c68c38dc56d262ac5c21001a18c">MESHX_MODEL_OP_LIGHT_CTL_STATUS</a></div><div class="ttdeci">#define MESHX_MODEL_OP_LIGHT_CTL_STATUS</div><div class="ttdef"><b>Definition</b> meshx_ble_mesh_cmn_def.h:413</div></div>
<div class="ttc" id="ameshx__ble__mesh__light__srv_8h_html_ab7d1e0ab27057d7d631cbe509570476d"><div class="ttname"><a href="../../d7/de0/meshx__ble__mesh__light__srv_8h.html#ab7d1e0ab27057d7d631cbe509570476d">meshx_lighting_server_cb_param_t</a></div><div class="ttdeci">struct meshx_lighting_server_cb_param meshx_lighting_server_cb_param_t</div></div>
<div class="ttc" id="astructmeshx__ctx_html_a008b742864438d623de613909036f8a6"><div class="ttname"><a href="../../db/d33/structmeshx__ctx.html#a008b742864438d623de613909036f8a6">meshx_ctx::p_ctx</a></div><div class="ttdeci">meshx_ptr_t p_ctx</div><div class="ttdef"><b>Definition</b> meshx_ble_mesh_cmn.h:48</div></div>
<div class="ttc" id="astructmeshx__ctx_html_a619e41bfdbb6eb1145054fb6b853abda"><div class="ttname"><a href="../../db/d33/structmeshx__ctx.html#a619e41bfdbb6eb1145054fb6b853abda">meshx_ctx::app_idx</a></div><div class="ttdeci">uint16_t app_idx</div><div class="ttdef"><b>Definition</b> meshx_ble_mesh_cmn.h:43</div></div>
<div class="ttc" id="astructmeshx__ctx_html_a791eb2748742c87194f25ccd9f13aafb"><div class="ttname"><a href="../../db/d33/structmeshx__ctx.html#a791eb2748742c87194f25ccd9f13aafb">meshx_ctx::opcode</a></div><div class="ttdeci">uint32_t opcode</div><div class="ttdef"><b>Definition</b> meshx_ble_mesh_cmn.h:45</div></div>
<div class="ttc" id="astructmeshx__ctx_html_aae16e1fbd81f097bdac104ecc0e9991e"><div class="ttname"><a href="../../db/d33/structmeshx__ctx.html#aae16e1fbd81f097bdac104ecc0e9991e">meshx_ctx::net_idx</a></div><div class="ttdeci">uint16_t net_idx</div><div class="ttdef"><b>Definition</b> meshx_ble_mesh_cmn.h:44</div></div>
<div class="ttc" id="astructmeshx__ctx_html_adca87f7e6e22789f4eee48a4ca23dcac"><div class="ttname"><a href="../../db/d33/structmeshx__ctx.html#adca87f7e6e22789f4eee48a4ca23dcac">meshx_ctx::src_addr</a></div><div class="ttdeci">uint16_t src_addr</div><div class="ttdef"><b>Definition</b> meshx_ble_mesh_cmn.h:46</div></div>
<div class="ttc" id="astructmeshx__ctx_html_af8b310010317426cc7a107a510a5e4bd"><div class="ttname"><a href="../../db/d33/structmeshx__ctx.html#af8b310010317426cc7a107a510a5e4bd">meshx_ctx::dst_addr</a></div><div class="ttdeci">uint16_t dst_addr</div><div class="ttdef"><b>Definition</b> meshx_ble_mesh_cmn.h:47</div></div>
<div class="ttc" id="astructmeshx__light__ctl__srv__state_html_a9a115fac8c507d2cb8f924523ff9528c"><div class="ttname"><a href="../../d5/d24/structmeshx__light__ctl__srv__state.html#a9a115fac8c507d2cb8f924523ff9528c">meshx_light_ctl_srv_state::delta_uv</a></div><div class="ttdeci">int16_t delta_uv</div><div class="ttdef"><b>Definition</b> meshx_ble_mesh_light_srv.h:344</div></div>
<div class="ttc" id="astructmeshx__light__ctl__srv__state_html_aa51508449e7a8a7129f90e5cf5f0bedd"><div class="ttname"><a href="../../d5/d24/structmeshx__light__ctl__srv__state.html#aa51508449e7a8a7129f90e5cf5f0bedd">meshx_light_ctl_srv_state::lightness</a></div><div class="ttdeci">uint16_t lightness</div><div class="ttdef"><b>Definition</b> meshx_ble_mesh_light_srv.h:338</div></div>
<div class="ttc" id="astructmeshx__light__ctl__srv__state_html_af8bf9b31292db3e4ead7f2e768cf37bd"><div class="ttname"><a href="../../d5/d24/structmeshx__light__ctl__srv__state.html#af8bf9b31292db3e4ead7f2e768cf37bd">meshx_light_ctl_srv_state::temperature</a></div><div class="ttdeci">uint16_t temperature</div><div class="ttdef"><b>Definition</b> meshx_ble_mesh_light_srv.h:341</div></div>
<div class="ttc" id="astructmeshx__lighting__server__cb__param_html_a3c2a6672a3d343b1ecf7182c2a8c230b"><div class="ttname"><a href="../../dc/d6c/structmeshx__lighting__server__cb__param.html#a3c2a6672a3d343b1ecf7182c2a8c230b">meshx_lighting_server_cb_param::ctx</a></div><div class="ttdeci">meshx_ctx_t ctx</div><div class="ttdef"><b>Definition</b> meshx_ble_mesh_light_srv.h:331</div></div>
<div class="ttc" id="astructmeshx__lighting__server__cb__param_html_a73cda8c575b818b96c9b4ab30b55e2d5"><div class="ttname"><a href="../../dc/d6c/structmeshx__lighting__server__cb__param.html#a73cda8c575b818b96c9b4ab30b55e2d5">meshx_lighting_server_cb_param::model</a></div><div class="ttdeci">meshx_model_t model</div><div class="ttdef"><b>Definition</b> meshx_ble_mesh_light_srv.h:332</div></div>
<div class="ttc" id="astructmeshx__lighting__server__cb__param_html_aac263c598899aa419704c785b731b10f"><div class="ttname"><a href="../../dc/d6c/structmeshx__lighting__server__cb__param.html#aac263c598899aa419704c785b731b10f">meshx_lighting_server_cb_param::state_change</a></div><div class="ttdeci">meshx_lighting_server_state_change_t state_change</div><div class="ttdef"><b>Definition</b> meshx_ble_mesh_light_srv.h:333</div></div>
<div class="ttc" id="astructmeshx__model_html_a93aa811e6fc21f6848bacf62853edab7"><div class="ttname"><a href="../../d7/df1/structmeshx__model.html#a93aa811e6fc21f6848bacf62853edab7">meshx_model::p_model</a></div><div class="ttdeci">meshx_ptr_t p_model</div><div class="ttdef"><b>Definition</b> meshx_ble_mesh_cmn.h:35</div></div>
<div class="ttc" id="astructmeshx__model_html_aca9a32ca9d557de21436fa5019ab9f1b"><div class="ttname"><a href="../../d7/df1/structmeshx__model.html#aca9a32ca9d557de21436fa5019ab9f1b">meshx_model::el_id</a></div><div class="ttdeci">uint16_t el_id</div><div class="ttdef"><b>Definition</b> meshx_ble_mesh_cmn.h:32</div></div>
<div class="ttc" id="astructmeshx__state__change__light__ctl__set__t_html_a2249a9c3ce8727d7495b5f52749822ec"><div class="ttname"><a href="../../dc/d08/structmeshx__state__change__light__ctl__set__t.html#a2249a9c3ce8727d7495b5f52749822ec">meshx_state_change_light_ctl_set_t::delta_uv</a></div><div class="ttdeci">int16_t delta_uv</div><div class="ttdef"><b>Definition</b> meshx_ble_mesh_light_srv.h:56</div></div>
<div class="ttc" id="astructmeshx__state__change__light__ctl__set__t_html_ac18bb67373d16a5629562a8bd5132c21"><div class="ttname"><a href="../../dc/d08/structmeshx__state__change__light__ctl__set__t.html#ac18bb67373d16a5629562a8bd5132c21">meshx_state_change_light_ctl_set_t::temperature</a></div><div class="ttdeci">uint16_t temperature</div><div class="ttdef"><b>Definition</b> meshx_ble_mesh_light_srv.h:55</div></div>
<div class="ttc" id="astructmeshx__state__change__light__ctl__set__t_html_ad478ecf14524d734de4b61d80c1acccf"><div class="ttname"><a href="../../dc/d08/structmeshx__state__change__light__ctl__set__t.html#ad478ecf14524d734de4b61d80c1acccf">meshx_state_change_light_ctl_set_t::lightness</a></div><div class="ttdeci">uint16_t lightness</div><div class="ttdef"><b>Definition</b> meshx_ble_mesh_light_srv.h:54</div></div>
<div class="ttc" id="aunionmeshx__lighting__server__state__change__t_html_af27cfd5b9ee34d1685768eb1373cd7f4"><div class="ttname"><a href="../../d3/d74/unionmeshx__lighting__server__state__change__t.html#af27cfd5b9ee34d1685768eb1373cd7f4">meshx_lighting_server_state_change_t::ctl_set</a></div><div class="ttdeci">meshx_state_change_light_ctl_set_t ctl_set</div><div class="ttdef"><b>Definition</b> meshx_ble_mesh_light_srv.h:193</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8695297933d548b07c6b2ccce8236920" name="a8695297933d548b07c6b2ccce8236920"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8695297933d548b07c6b2ccce8236920">&#9670;&#160;</a></span>meshx_light_ctl_srv_state_restore()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../da/d68/meshx__err_8h.html#a6f984f69fa8d0240992b3a1e78bd42f6">meshx_err_t</a> meshx_light_ctl_srv_state_restore </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="#a8ba6098c98f00634f675fa2f2d7fb625">meshx_ctl_server_model_t</a> *</td>          <td class="paramname"><span class="paramname"><em>p_model</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d7/de0/meshx__ble__mesh__light__srv_8h.html#a1d9a4faf50d1bf5ec8b4b042fdbc66be">meshx_light_ctl_srv_state_t</a></td>          <td class="paramname"><span class="paramname"><em>ctl_state</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Restore the CTL state for the generic server model. </p>
<p>This function restores the CTL state of the specified server model using the provided state value. It checks for a valid model pointer before proceeding with the restoration.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_model</td><td>Pointer to the CTL server model structure. </td></tr>
    <tr><td class="paramname">ctl_state</td><td>The CTL state to be restored.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>MESHX_INVALID_STATE: If the model pointer is NULL.</li>
<li>Result of the platform-specific restoration function. </li>
</ul>
</dd></dl>
<div class="fragment"><div class="line"><span class="lineno">  460</span>{</div>
<div class="line"><span class="lineno">  461</span>    <span class="keywordflow">if</span> (!p_model)</div>
<div class="line"><span class="lineno">  462</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../da/d68/meshx__err_8h.html#a6f984f69fa8d0240992b3a1e78bd42f6ac6901494c24d156734f0069805b6cd72">MESHX_INVALID_STATE</a>;</div>
<div class="line"><span class="lineno">  463</span> </div>
<div class="line"><span class="lineno">  464</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="../../d7/de0/meshx__ble__mesh__light__srv_8h.html#add201d93559ff4ff071950572182e204">meshx_plat_light_ctl_srv_restore</a>(p_model-&gt;<a class="code hl_variable" href="../../d1/da6/structmeshx__model__interface.html#a6707c0437b18f6c3a38857b586eb8ba3">meshx_sig</a>,</div>
<div class="line"><span class="lineno">  465</span>                                            ctl_state.<a class="code hl_variable" href="../../d5/d24/structmeshx__light__ctl__srv__state.html#a9a115fac8c507d2cb8f924523ff9528c">delta_uv</a>,</div>
<div class="line"><span class="lineno">  466</span>                                            ctl_state.<a class="code hl_variable" href="../../d5/d24/structmeshx__light__ctl__srv__state.html#aa51508449e7a8a7129f90e5cf5f0bedd">lightness</a>,</div>
<div class="line"><span class="lineno">  467</span>                                            ctl_state.<a class="code hl_variable" href="../../d5/d24/structmeshx__light__ctl__srv__state.html#af8bf9b31292db3e4ead7f2e768cf37bd">temperature</a>,</div>
<div class="line"><span class="lineno">  468</span>                                            ctl_state.<a class="code hl_variable" href="../../d5/d24/structmeshx__light__ctl__srv__state.html#ab048349e3ecf7d6a15323a9f01f1470f">temperature_range_max</a>,</div>
<div class="line"><span class="lineno">  469</span>                                            ctl_state.<a class="code hl_variable" href="../../d5/d24/structmeshx__light__ctl__srv__state.html#a794df7a72e72bc58b47c81e1dab76d08">temperature_range_min</a>);</div>
<div class="line"><span class="lineno">  470</span>}</div>
<div class="ttc" id="ameshx__ble__mesh__light__srv_8h_html_add201d93559ff4ff071950572182e204"><div class="ttname"><a href="../../d7/de0/meshx__ble__mesh__light__srv_8h.html#add201d93559ff4ff071950572182e204">meshx_plat_light_ctl_srv_restore</a></div><div class="ttdeci">meshx_err_t meshx_plat_light_ctl_srv_restore(meshx_ptr_t p_model, uint16_t delta_uv, uint16_t lightness, uint16_t temperature, uint16_t temp_range_max, uint16_t temp_range_min)</div><div class="ttdoc">Restore the state of the Light CTL Server.</div><div class="ttdef"><b>Definition</b> esp_light_srv_model.c:722</div></div>
<div class="ttc" id="ameshx__err_8h_html_a6f984f69fa8d0240992b3a1e78bd42f6ac6901494c24d156734f0069805b6cd72"><div class="ttname"><a href="../../da/d68/meshx__err_8h.html#a6f984f69fa8d0240992b3a1e78bd42f6ac6901494c24d156734f0069805b6cd72">MESHX_INVALID_STATE</a></div><div class="ttdeci">@ MESHX_INVALID_STATE</div><div class="ttdef"><b>Definition</b> meshx_err.h:45</div></div>
<div class="ttc" id="astructmeshx__light__ctl__srv__state_html_a794df7a72e72bc58b47c81e1dab76d08"><div class="ttname"><a href="../../d5/d24/structmeshx__light__ctl__srv__state.html#a794df7a72e72bc58b47c81e1dab76d08">meshx_light_ctl_srv_state::temperature_range_min</a></div><div class="ttdeci">uint16_t temperature_range_min</div><div class="ttdef"><b>Definition</b> meshx_ble_mesh_light_srv.h:348</div></div>
<div class="ttc" id="astructmeshx__light__ctl__srv__state_html_ab048349e3ecf7d6a15323a9f01f1470f"><div class="ttname"><a href="../../d5/d24/structmeshx__light__ctl__srv__state.html#ab048349e3ecf7d6a15323a9f01f1470f">meshx_light_ctl_srv_state::temperature_range_max</a></div><div class="ttdeci">uint16_t temperature_range_max</div><div class="ttdef"><b>Definition</b> meshx_ble_mesh_light_srv.h:349</div></div>
<div class="ttc" id="astructmeshx__model__interface_html_a6707c0437b18f6c3a38857b586eb8ba3"><div class="ttname"><a href="../../d1/da6/structmeshx__model__interface.html#a6707c0437b18f6c3a38857b586eb8ba3">meshx_model_interface::meshx_sig</a></div><div class="ttdeci">meshx_ptr_t meshx_sig</div><div class="ttdef"><b>Definition</b> meshx_common.h:68</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a934b83618b10c26bf4d3f17e0ae1aa08" name="a934b83618b10c26bf4d3f17e0ae1aa08"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a934b83618b10c26bf4d3f17e0ae1aa08">&#9670;&#160;</a></span>meshx_light_ctl_srv_status_send()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../da/d68/meshx__err_8h.html#a6f984f69fa8d0240992b3a1e78bd42f6">meshx_err_t</a> meshx_light_ctl_srv_status_send </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d6/d1d/meshx__ble__mesh__cmn_8h.html#ae2bb37b6b888ca21c50c93294c099237">meshx_model_t</a> *</td>          <td class="paramname"><span class="paramname"><em>p_model</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d1d/meshx__ble__mesh__cmn_8h.html#af9f2a99e7f5887b417d5425a4ba5e664">meshx_ctx_t</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t</td>          <td class="paramname"><span class="paramname"><em>delta_uv</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t</td>          <td class="paramname"><span class="paramname"><em>lightness</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t</td>          <td class="paramname"><span class="paramname"><em>temperature</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send the Light CTL status message. </p>
<p>This function sends the Light CTL status message to the specified context.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p_model</td><td>Pointer to the MeshX model structure. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ctx</td><td>Context structure containing the necessary parameters for sending the message. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">delta_uv</td><td>The Delta UV value to be included in the status message. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">lightness</td><td>The Lightness value to be included in the status message. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">temperature</td><td>The Temperature value to be included in the status message.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>MESHX_SUCCESS: Successfully sent the status message.</li>
<li>Appropriate error code on failure. </li>
</ul>
</dd></dl>
<div class="fragment"><div class="line"><span class="lineno">  491</span>{</div>
<div class="line"><span class="lineno">  492</span>    <span class="keywordflow">if</span> (!p_model)</div>
<div class="line"><span class="lineno">  493</span>    {</div>
<div class="line"><span class="lineno">  494</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../da/d68/meshx__err_8h.html#a6f984f69fa8d0240992b3a1e78bd42f6a0fbbd53c07d6e68fb5bca0ac8a532c7e">MESHX_INVALID_ARG</a>;</div>
<div class="line"><span class="lineno">  495</span>    }</div>
<div class="line"><span class="lineno">  496</span> </div>
<div class="line"><span class="lineno">  497</span>    <a class="code hl_union" href="../../d3/d74/unionmeshx__lighting__server__state__change__t.html">meshx_lighting_server_state_change_t</a> state_change = {</div>
<div class="line"><span class="lineno">  498</span>        .ctl_set = {</div>
<div class="line"><span class="lineno">  499</span>            .delta_uv = delta_uv,</div>
<div class="line"><span class="lineno">  500</span>            .lightness = lightness,</div>
<div class="line"><span class="lineno">  501</span>            .temperature = temperature</div>
<div class="line"><span class="lineno">  502</span>        }</div>
<div class="line"><span class="lineno">  503</span>    };</div>
<div class="line"><span class="lineno">  504</span>    <a class="code hl_typedef" href="../../dc/daf/meshx__light__server_8h.html#aac9cb9bd2a55d3dbf5e9f52f12637170">meshx_light_server_send_params_t</a> params =</div>
<div class="line"><span class="lineno">  505</span>    {</div>
<div class="line"><span class="lineno">  506</span>        .p_model = p_model,</div>
<div class="line"><span class="lineno">  507</span>        .p_ctx = ctx,</div>
<div class="line"><span class="lineno">  508</span>        .state_change = &amp;state_change</div>
<div class="line"><span class="lineno">  509</span>    };</div>
<div class="line"><span class="lineno">  510</span>    <a class="code hl_enumeration" href="../../da/d68/meshx__err_8h.html#a6f984f69fa8d0240992b3a1e78bd42f6">meshx_err_t</a> err = <a class="code hl_function" href="../../dc/daf/meshx__light__server_8h.html#a415ee1b72d1768425e38d4ee6d004c92">meshx_gen_light_srv_status_send</a>(&amp;params);</div>
<div class="line"><span class="lineno">  511</span> </div>
<div class="line"><span class="lineno">  512</span>    <span class="keywordflow">if</span> (err != <a class="code hl_enumvalue" href="../../da/d68/meshx__err_8h.html#a6f984f69fa8d0240992b3a1e78bd42f6a0bcfcbc6db2a31dd3b3c3a91d999841b">MESHX_SUCCESS</a>)</div>
<div class="line"><span class="lineno">  513</span>    {</div>
<div class="line"><span class="lineno">  514</span>        <a class="code hl_define" href="../../d7/dcb/meshx__log_8h.html#a56673888067cbe14c7a33b0856f46eb8">MESHX_LOGE</a>(<a class="code hl_enumvalue" href="../../d3/da1/module__id_8h.html#ac6141ce7b2d1d07b28553017c6a3aedcae99b3f7b220d81ae4efb1b11bc390689">MODULE_ID_MODEL_SERVER</a>, <span class="stringliteral">&quot;Failed to send Light CTL status: %d&quot;</span>, err);</div>
<div class="line"><span class="lineno">  515</span>    }</div>
<div class="line"><span class="lineno">  516</span> </div>
<div class="line"><span class="lineno">  517</span>    <span class="keywordflow">return</span> err;</div>
<div class="line"><span class="lineno">  518</span>}</div>
<div class="ttc" id="ameshx__light__server_8h_html_a415ee1b72d1768425e38d4ee6d004c92"><div class="ttname"><a href="../../dc/daf/meshx__light__server_8h.html#a415ee1b72d1768425e38d4ee6d004c92">meshx_gen_light_srv_status_send</a></div><div class="ttdeci">meshx_err_t meshx_gen_light_srv_status_send(const meshx_light_server_send_params_t *params)</div><div class="ttdoc">Sends a status message for the Lighting Server model.</div><div class="ttdef"><b>Definition</b> meshx_light_server.c:141</div></div>
<div class="ttc" id="ameshx__light__server_8h_html_aac9cb9bd2a55d3dbf5e9f52f12637170"><div class="ttname"><a href="../../dc/daf/meshx__light__server_8h.html#aac9cb9bd2a55d3dbf5e9f52f12637170">meshx_light_server_send_params_t</a></div><div class="ttdeci">struct meshx_light_server_send_params meshx_light_server_send_params_t</div></div>
<div class="ttc" id="aunionmeshx__lighting__server__state__change__t_html"><div class="ttname"><a href="../../d3/d74/unionmeshx__lighting__server__state__change__t.html">meshx_lighting_server_state_change_t</a></div><div class="ttdoc">Lighting Server Model state change value union.</div><div class="ttdef"><b>Definition</b> meshx_ble_mesh_light_srv.h:185</div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Oct 30 2025 04:53:54 for MeshX by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2
</small></address>
</div><!-- doc-content -->
</body>
</html>
