<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MeshX: app/components/meshx/default/inc/meshx_nvs.h Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">MeshX<span id="projectnumber">&#160;0.2</span>
   </div>
   <div id="projectbrief">This repository provides an implementation for Bluetooth Low Energy (BLE) Mesh network nodes using ESP32. The project allows you to create BLE mesh nodes that can communicate with each other, enabling the development of smart home solutions or other IoT-based applications.</div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('d3/d7d/meshx__nvs_8h_source.html','../../'); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">meshx_nvs.h</div></div>
</div><!--header-->
<div class="contents">
<a href="../../d3/d7d/meshx__nvs_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span></div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span> </div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span><span class="preprocessor">#ifndef __MESHX_NVS_H__</span></div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span><span class="preprocessor">#define __MESHX_NVS_H__</span></div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span> </div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span><span class="preprocessor">#include &lt;stdint.h&gt;</span></div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span><span class="preprocessor">#include &quot;<a class="code" href="../../da/db3/meshx__control__task_8h.html">meshx_control_task.h</a>&quot;</span></div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span><span class="preprocessor">#include &quot;<a class="code" href="../../d4/d69/os__timer_8h.html">os_timer.h</a>&quot;</span></div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span><span class="preprocessor">#include &quot;nvs.h&quot;</span></div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span> </div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span><span class="preprocessor">#define MESHX_NVS_TIMER_PERIOD_DEF  1000</span></div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span> </div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span><span class="preprocessor">#ifndef MESHX_NVS_TIMER_PERIOD</span></div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span><span class="preprocessor">#define MESHX_NVS_TIMER_PERIOD      MESHX_NVS_TIMER_PERIOD_DEF</span></div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span><span class="preprocessor">#endif </span><span class="comment">/* MESHX_NVS_TIMER_PERIOD */</span><span class="preprocessor"></span></div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span> </div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span><span class="preprocessor">#define MESHX_NVS_AUTO_COMMIT       true</span></div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span><span class="preprocessor">#define MESHX_NVS_NO_AUTO_COMMIT    false</span></div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span> </div>
<div class="foldopen" id="foldopen00029" data-start="{" data-end="};">
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno"><a class="line" href="../../dd/d16/structmeshx__nvs.html">   29</a></span><span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code hl_struct" href="../../dd/d16/structmeshx__nvs.html">meshx_nvs</a> {</div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span>    uint16_t init;</div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span>    uint16_t cid;</div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span>    uint16_t pid;</div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span>    nvs_handle_t meshx_nvs_handle;</div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span><span class="preprocessor">#ifdef MESHX_NVS_TIMER_PERIOD</span></div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span>    os_timer_t *meshx_nvs_stability_timer;</div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span><span class="preprocessor">#endif </span><span class="comment">/* MESHX_NVS_TIMER_PERIOD */</span><span class="preprocessor"></span></div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span>}meshx_nvs_t;</div>
</div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span></div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span>esp_err_t <a class="code hl_function" href="../../d3/d7d/meshx__nvs_8h.html#ab29995590d0bd1f9c26a153b21e4e174">meshx_nvs_init</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span></div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span>esp_err_t <a class="code hl_function" href="../../d3/d7d/meshx__nvs_8h.html#aa2f38e7e889a30b61ea1d19c3b0bd066">meshx_nvs_erase</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span></div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span>esp_err_t <a class="code hl_function" href="../../d3/d7d/meshx__nvs_8h.html#a3710fd25ac918f839896f614501a11b5">meshx_nvs_commit</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span></div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span>esp_err_t <a class="code hl_function" href="../../d3/d7d/meshx__nvs_8h.html#abf81f7f51e2250115a9fedeaca1d62b9">meshx_nvs_close</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span></div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span>esp_err_t <a class="code hl_function" href="../../d3/d7d/meshx__nvs_8h.html#aeafdad0434b678bae13012163785f3fd">meshx_nvs_remove</a>(<span class="keywordtype">char</span> <span class="keyword">const</span>* key);</div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span></div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span>esp_err_t <a class="code hl_function" href="../../d3/d7d/meshx__nvs_8h.html#a775a530739dded2337fc6c2b7d87d40a">meshx_nvs_open</a>(uint16_t cid, uint16_t pid, uint32_t commit_timeout_ms);</div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span></div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>esp_err_t <a class="code hl_function" href="../../d3/d7d/meshx__nvs_8h.html#a6656d3681375a50b42a6bbd67d2299de">meshx_nvs_get</a>(<span class="keywordtype">char</span> <span class="keyword">const</span> *key, <span class="keywordtype">void</span> *blob, <span class="keywordtype">size_t</span> blob_size);</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span></div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span>esp_err_t <a class="code hl_function" href="../../d3/d7d/meshx__nvs_8h.html#aa56d6b16c30dd34b74499bb23c8aa846">meshx_nvs_set</a>(<span class="keywordtype">char</span> <span class="keyword">const</span>* key, <span class="keywordtype">void</span> <span class="keyword">const</span>* blob, <span class="keywordtype">size_t</span> blob_size, <span class="keywordtype">bool</span> arm_timer);</div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span></div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>esp_err_t <a class="code hl_function" href="../../d3/d7d/meshx__nvs_8h.html#ab9024f100789e9210760b4c2e0ae9368">meshx_nvs_elemnt_ctx_get</a>(uint16_t element_id, <span class="keywordtype">void</span> *blob, <span class="keywordtype">size_t</span> blob_size);</div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span></div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span> </div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span>esp_err_t <a class="code hl_function" href="../../d3/d7d/meshx__nvs_8h.html#a66d735095e08d62f08e7508969f29bf9">meshx_nvs_elemnt_ctx_set</a>(uint16_t element_id, <span class="keyword">const</span> <span class="keywordtype">void</span> *blob, <span class="keywordtype">size_t</span> blob_size);</div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span> </div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span><span class="preprocessor">#endif </span><span class="comment">/* __MESHX_NVS_H__ */</span><span class="preprocessor"></span></div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span> </div>
<div class="ttc" id="ameshx__control__task_8h_html"><div class="ttname"><a href="../../da/db3/meshx__control__task_8h.html">meshx_control_task.h</a></div><div class="ttdoc">Header file for the control task in the BLE mesh node application.</div></div>
<div class="ttc" id="ameshx__nvs_8h_html_a3710fd25ac918f839896f614501a11b5"><div class="ttname"><a href="../../d3/d7d/meshx__nvs_8h.html#a3710fd25ac918f839896f614501a11b5">meshx_nvs_commit</a></div><div class="ttdeci">esp_err_t meshx_nvs_commit(void)</div><div class="ttdoc">Commit changes to the NVS.</div><div class="ttdef"><b>Definition</b> <a href="../../d5/d8f/meshx__nvs_8c_source.html#l00244">meshx_nvs.c:244</a></div></div>
<div class="ttc" id="ameshx__nvs_8h_html_a6656d3681375a50b42a6bbd67d2299de"><div class="ttname"><a href="../../d3/d7d/meshx__nvs_8h.html#a6656d3681375a50b42a6bbd67d2299de">meshx_nvs_get</a></div><div class="ttdeci">esp_err_t meshx_nvs_get(char const *key, void *blob, size_t blob_size)</div><div class="ttdoc">Get a value from the NVS.</div><div class="ttdef"><b>Definition</b> <a href="../../d5/d8f/meshx__nvs_8c_source.html#l00305">meshx_nvs.c:305</a></div></div>
<div class="ttc" id="ameshx__nvs_8h_html_a66d735095e08d62f08e7508969f29bf9"><div class="ttname"><a href="../../d3/d7d/meshx__nvs_8h.html#a66d735095e08d62f08e7508969f29bf9">meshx_nvs_elemnt_ctx_set</a></div><div class="ttdeci">esp_err_t meshx_nvs_elemnt_ctx_set(uint16_t element_id, const void *blob, size_t blob_size)</div><div class="ttdoc">Store the context of a specific element to NVS.</div><div class="ttdef"><b>Definition</b> <a href="../../d5/d8f/meshx__nvs_8c_source.html#l00376">meshx_nvs.c:376</a></div></div>
<div class="ttc" id="ameshx__nvs_8h_html_a775a530739dded2337fc6c2b7d87d40a"><div class="ttname"><a href="../../d3/d7d/meshx__nvs_8h.html#a775a530739dded2337fc6c2b7d87d40a">meshx_nvs_open</a></div><div class="ttdeci">esp_err_t meshx_nvs_open(uint16_t cid, uint16_t pid, uint32_t commit_timeout_ms)</div><div class="ttdoc">Open the NVS with a timeout.</div><div class="ttdef"><b>Definition</b> <a href="../../d5/d8f/meshx__nvs_8c_source.html#l00139">meshx_nvs.c:139</a></div></div>
<div class="ttc" id="ameshx__nvs_8h_html_aa2f38e7e889a30b61ea1d19c3b0bd066"><div class="ttname"><a href="../../d3/d7d/meshx__nvs_8h.html#aa2f38e7e889a30b61ea1d19c3b0bd066">meshx_nvs_erase</a></div><div class="ttdeci">esp_err_t meshx_nvs_erase(void)</div><div class="ttdoc">Erase all key-value pairs stored in the NVS.</div><div class="ttdef"><b>Definition</b> <a href="../../d5/d8f/meshx__nvs_8c_source.html#l00228">meshx_nvs.c:228</a></div></div>
<div class="ttc" id="ameshx__nvs_8h_html_aa56d6b16c30dd34b74499bb23c8aa846"><div class="ttname"><a href="../../d3/d7d/meshx__nvs_8h.html#aa56d6b16c30dd34b74499bb23c8aa846">meshx_nvs_set</a></div><div class="ttdeci">esp_err_t meshx_nvs_set(char const *key, void const *blob, size_t blob_size, bool arm_timer)</div><div class="ttdoc">Set a value in the NVS.</div><div class="ttdef"><b>Definition</b> <a href="../../d5/d8f/meshx__nvs_8c_source.html#l00326">meshx_nvs.c:326</a></div></div>
<div class="ttc" id="ameshx__nvs_8h_html_ab29995590d0bd1f9c26a153b21e4e174"><div class="ttname"><a href="../../d3/d7d/meshx__nvs_8h.html#ab29995590d0bd1f9c26a153b21e4e174">meshx_nvs_init</a></div><div class="ttdeci">esp_err_t meshx_nvs_init(void)</div><div class="ttdoc">MeshX NVS Initialisation.</div><div class="ttdef"><b>Definition</b> <a href="../../d5/d8f/meshx__nvs_8c_source.html#l00114">meshx_nvs.c:114</a></div></div>
<div class="ttc" id="ameshx__nvs_8h_html_ab9024f100789e9210760b4c2e0ae9368"><div class="ttname"><a href="../../d3/d7d/meshx__nvs_8h.html#ab9024f100789e9210760b4c2e0ae9368">meshx_nvs_elemnt_ctx_get</a></div><div class="ttdeci">esp_err_t meshx_nvs_elemnt_ctx_get(uint16_t element_id, void *blob, size_t blob_size)</div><div class="ttdoc">Retrieve the context of a specific element from NVS.</div><div class="ttdef"><b>Definition</b> <a href="../../d5/d8f/meshx__nvs_8c_source.html#l00355">meshx_nvs.c:355</a></div></div>
<div class="ttc" id="ameshx__nvs_8h_html_abf81f7f51e2250115a9fedeaca1d62b9"><div class="ttname"><a href="../../d3/d7d/meshx__nvs_8h.html#abf81f7f51e2250115a9fedeaca1d62b9">meshx_nvs_close</a></div><div class="ttdeci">esp_err_t meshx_nvs_close(void)</div><div class="ttdoc">Close the NVS handle.</div><div class="ttdef"><b>Definition</b> <a href="../../d5/d8f/meshx__nvs_8c_source.html#l00260">meshx_nvs.c:260</a></div></div>
<div class="ttc" id="ameshx__nvs_8h_html_aeafdad0434b678bae13012163785f3fd"><div class="ttname"><a href="../../d3/d7d/meshx__nvs_8h.html#aeafdad0434b678bae13012163785f3fd">meshx_nvs_remove</a></div><div class="ttdeci">esp_err_t meshx_nvs_remove(char const *key)</div><div class="ttdoc">Remove a key-value pair from the NVS.</div><div class="ttdef"><b>Definition</b> <a href="../../d5/d8f/meshx__nvs_8c_source.html#l00285">meshx_nvs.c:285</a></div></div>
<div class="ttc" id="aos__timer_8h_html"><div class="ttname"><a href="../../d4/d69/os__timer_8h.html">os_timer.h</a></div><div class="ttdoc">Header file for OS timer utilities.</div></div>
<div class="ttc" id="astructmeshx__nvs_html"><div class="ttname"><a href="../../dd/d16/structmeshx__nvs.html">meshx_nvs</a></div><div class="ttdef"><b>Definition</b> <a href="#l00029">meshx_nvs.h:29</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_d422163b96683743ed3963d4aac17747.html">app</a></li><li class="navelem"><a class="el" href="../../dir_c65bd19e757d26cf4d732c1ae0727ae8.html">components</a></li><li class="navelem"><a class="el" href="../../dir_f203b345362cbfbb0face6aabfa16576.html">meshx</a></li><li class="navelem"><a class="el" href="../../dir_7f50d07922f3bc2176b4eed9193df5ce.html">default</a></li><li class="navelem"><a class="el" href="../../dir_d8fc81364c4d58707be67557187dcf83.html">inc</a></li><li class="navelem"><a class="el" href="../../d3/d7d/meshx__nvs_8h.html">meshx_nvs.h</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
